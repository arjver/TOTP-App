var ke=Object.defineProperty;var Te=(re,ee,te)=>ee in re?ke(re,ee,{enumerable:!0,configurable:!0,writable:!0,value:te}):re[ee]=te;var ve=(re,ee,te)=>(Te(re,typeof ee!="symbol"?ee+"":ee,te),te);(function(){const ee=document.createElement("link").relList;if(ee&&ee.supports&&ee.supports("modulepreload"))return;for(const ie of document.querySelectorAll('link[rel="modulepreload"]'))ne(ie);new MutationObserver(ie=>{for(const oe of ie)if(oe.type==="childList")for(const se of oe.addedNodes)se.tagName==="LINK"&&se.rel==="modulepreload"&&ne(se)}).observe(document,{childList:!0,subtree:!0});function te(ie){const oe={};return ie.integrity&&(oe.integrity=ie.integrity),ie.referrerpolicy&&(oe.referrerPolicy=ie.referrerpolicy),ie.crossorigin==="use-credentials"?oe.credentials="include":ie.crossorigin==="anonymous"?oe.credentials="omit":oe.credentials="same-origin",oe}function ne(ie){if(ie.ep)return;ie.ep=!0;const oe=te(ie);fetch(ie.href,oe)}})();const app="";function noop(){}function is_promise(re){return!!re&&(typeof re=="object"||typeof re=="function")&&typeof re.then=="function"}function run(re){return re()}function blank_object(){return Object.create(null)}function run_all(re){re.forEach(run)}function is_function(re){return typeof re=="function"}function safe_not_equal(re,ee){return re!=re?ee==ee:re!==ee||re&&typeof re=="object"||typeof re=="function"}let src_url_equal_anchor;function src_url_equal(re,ee){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=ee,re===src_url_equal_anchor.href}function is_empty(re){return Object.keys(re).length===0}function subscribe(re,...ee){if(re==null)return noop;const te=re.subscribe(...ee);return te.unsubscribe?()=>te.unsubscribe():te}function component_subscribe(re,ee,te){re.$$.on_destroy.push(subscribe(ee,te))}function append(re,ee){re.appendChild(ee)}function insert(re,ee,te){re.insertBefore(ee,te||null)}function detach(re){re.parentNode&&re.parentNode.removeChild(re)}function destroy_each(re,ee){for(let te=0;te<re.length;te+=1)re[te]&&re[te].d(ee)}function element(re){return document.createElement(re)}function text(re){return document.createTextNode(re)}function space(){return text(" ")}function empty(){return text("")}function listen(re,ee,te,ne){return re.addEventListener(ee,te,ne),()=>re.removeEventListener(ee,te,ne)}function attr(re,ee,te){te==null?re.removeAttribute(ee):re.getAttribute(ee)!==te&&re.setAttribute(ee,te)}function children(re){return Array.from(re.childNodes)}function set_data(re,ee){ee=""+ee,re.wholeText!==ee&&(re.data=ee)}let current_component;function set_current_component(re){current_component=re}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function bubble(re,ee){const te=re.$$.callbacks[ee.type];te&&te.slice().forEach(ne=>ne.call(this,ee))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(re){render_callbacks.push(re)}function add_flush_callback(re){flush_callbacks.push(re)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const re=current_component;do{try{for(;flushidx<dirty_components.length;){const ee=dirty_components[flushidx];flushidx++,set_current_component(ee),update(ee.$$)}}catch(ee){throw dirty_components.length=0,flushidx=0,ee}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let ee=0;ee<render_callbacks.length;ee+=1){const te=render_callbacks[ee];seen_callbacks.has(te)||(seen_callbacks.add(te),te())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(re)}function update(re){if(re.fragment!==null){re.update(),run_all(re.before_update);const ee=re.dirty;re.dirty=[-1],re.fragment&&re.fragment.p(re.ctx,ee),re.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(re,ee){re&&re.i&&(outroing.delete(re),re.i(ee))}function transition_out(re,ee,te,ne){if(re&&re.o){if(outroing.has(re))return;outroing.add(re),outros.c.push(()=>{outroing.delete(re),ne&&(te&&re.d(1),ne())}),re.o(ee)}else ne&&ne()}function handle_promise(re,ee){const te=ee.token={};function ne(ie,oe,se,ae){if(ee.token!==te)return;ee.resolved=ae;let ue=ee.ctx;se!==void 0&&(ue=ue.slice(),ue[se]=ae);const ce=ie&&(ee.current=ie)(ue);let he=!1;ee.block&&(ee.blocks?ee.blocks.forEach((fe,le)=>{le!==oe&&fe&&(group_outros(),transition_out(fe,1,1,()=>{ee.blocks[le]===fe&&(ee.blocks[le]=null)}),check_outros())}):ee.block.d(1),ce.c(),transition_in(ce,1),ce.m(ee.mount(),ee.anchor),he=!0),ee.block=ce,ee.blocks&&(ee.blocks[oe]=ce),he&&flush()}if(is_promise(re)){const ie=get_current_component();if(re.then(oe=>{set_current_component(ie),ne(ee.then,1,ee.value,oe),set_current_component(null)},oe=>{if(set_current_component(ie),ne(ee.catch,2,ee.error,oe),set_current_component(null),!ee.hasCatch)throw oe}),ee.current!==ee.pending)return ne(ee.pending,0),!0}else{if(ee.current!==ee.then)return ne(ee.then,1,ee.value,re),!0;ee.resolved=re}}function update_await_block_branch(re,ee,te){const ne=ee.slice(),{resolved:ie}=re;re.current===re.then&&(ne[re.value]=ie),re.current===re.catch&&(ne[re.error]=ie),re.block.p(ne,te)}function bind(re,ee,te){const ne=re.$$.props[ee];ne!==void 0&&(re.$$.bound[ne]=te,te(re.$$.ctx[ne]))}function create_component(re){re&&re.c()}function mount_component(re,ee,te,ne){const{fragment:ie,after_update:oe}=re.$$;ie&&ie.m(ee,te),ne||add_render_callback(()=>{const se=re.$$.on_mount.map(run).filter(is_function);re.$$.on_destroy?re.$$.on_destroy.push(...se):run_all(se),re.$$.on_mount=[]}),oe.forEach(add_render_callback)}function destroy_component(re,ee){const te=re.$$;te.fragment!==null&&(run_all(te.on_destroy),te.fragment&&te.fragment.d(ee),te.on_destroy=te.fragment=null,te.ctx=[])}function make_dirty(re,ee){re.$$.dirty[0]===-1&&(dirty_components.push(re),schedule_update(),re.$$.dirty.fill(0)),re.$$.dirty[ee/31|0]|=1<<ee%31}function init$1(re,ee,te,ne,ie,oe,se,ae=[-1]){const ue=current_component;set_current_component(re);const ce=re.$$={fragment:null,ctx:[],props:oe,update:noop,not_equal:ie,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(ee.context||(ue?ue.$$.context:[])),callbacks:blank_object(),dirty:ae,skip_bound:!1,root:ee.target||ue.$$.root};se&&se(ce.root);let he=!1;if(ce.ctx=te?te(re,ee.props||{},(fe,le,...de)=>{const pe=de.length?de[0]:le;return ce.ctx&&ie(ce.ctx[fe],ce.ctx[fe]=pe)&&(!ce.skip_bound&&ce.bound[fe]&&ce.bound[fe](pe),he&&make_dirty(re,fe)),le}):[],ce.update(),he=!0,run_all(ce.before_update),ce.fragment=ne?ne(ce.ctx):!1,ee.target){if(ee.hydrate){const fe=children(ee.target);ce.fragment&&ce.fragment.l(fe),fe.forEach(detach)}else ce.fragment&&ce.fragment.c();ee.intro&&transition_in(re.$$.fragment),mount_component(re,ee.target,ee.anchor,ee.customElement),flush()}set_current_component(ue)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(ee,te){if(!is_function(te))return noop;const ne=this.$$.callbacks[ee]||(this.$$.callbacks[ee]=[]);return ne.push(te),()=>{const ie=ne.indexOf(te);ie!==-1&&ne.splice(ie,1)}}$set(ee){this.$$set&&!is_empty(ee)&&(this.$$.skip_bound=!0,this.$$set(ee),this.$$.skip_bound=!1)}}/*! otpauth v8.0.3 | (c) Héctor Molinero Fernández <hector@molinero.dev> | MIT | https://github.com/hectorm/otpauth *//*! jssha v3.2.0 | (c) Brian Turek <brian.turek@gmail.com> | BSD-3-Clause | https://github.com/Caligatio/jsSHA */const uintToBuf=re=>{const ee=new ArrayBuffer(8),te=new Uint8Array(ee);let ne=re;for(let ie=7;ie>=0&&ne!==0;ie--)te[ie]=ne&255,ne-=te[ie],ne/=256;return ee},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function n(re,ee,te,ne){let ie,oe,se;const ae=ee||[0],ue=(te=te||0)>>>3,ce=ne===-1?3:0;for(ie=0;ie<re.length;ie+=1)se=ie+ue,oe=se>>>2,ae.length<=oe&&ae.push(0),ae[oe]|=re[ie]<<8*(ce+ne*(se%4));return{value:ae,binLen:8*re.length+te}}function e(re,ee,te){switch(ee){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(re){case"HEX":return function(ne,ie,oe){return function(se,ae,ue,ce){let he,fe,le,de;if(se.length%2!=0)throw new Error("String of HEX type must be in byte increments");const pe=ae||[0],we=(ue=ue||0)>>>3,me=ce===-1?3:0;for(he=0;he<se.length;he+=2){if(fe=parseInt(se.substr(he,2),16),isNaN(fe))throw new Error("String of HEX type contains invalid characters");for(de=(he>>>1)+we,le=de>>>2;pe.length<=le;)pe.push(0);pe[le]|=fe<<8*(me+ce*(de%4))}return{value:pe,binLen:4*se.length+ue}}(ne,ie,oe,te)};case"TEXT":return function(ne,ie,oe){return function(se,ae,ue,ce,he){let fe,le,de,pe,we,me,ge,ye,_e=0;const Be=ue||[0],be=(ce=ce||0)>>>3;if(ae==="UTF8")for(ge=he===-1?3:0,de=0;de<se.length;de+=1)for(fe=se.charCodeAt(de),le=[],128>fe?le.push(fe):2048>fe?(le.push(192|fe>>>6),le.push(128|63&fe)):55296>fe||57344<=fe?le.push(224|fe>>>12,128|fe>>>6&63,128|63&fe):(de+=1,fe=65536+((1023&fe)<<10|1023&se.charCodeAt(de)),le.push(240|fe>>>18,128|fe>>>12&63,128|fe>>>6&63,128|63&fe)),pe=0;pe<le.length;pe+=1){for(me=_e+be,we=me>>>2;Be.length<=we;)Be.push(0);Be[we]|=le[pe]<<8*(ge+he*(me%4)),_e+=1}else for(ge=he===-1?2:0,ye=ae==="UTF16LE"&&he!==1||ae!=="UTF16LE"&&he===1,de=0;de<se.length;de+=1){for(fe=se.charCodeAt(de),ye===!0&&(pe=255&fe,fe=pe<<8|fe>>>8),me=_e+be,we=me>>>2;Be.length<=we;)Be.push(0);Be[we]|=fe<<8*(ge+he*(me%4)),_e+=2}return{value:Be,binLen:8*_e+ce}}(ne,ee,ie,oe,te)};case"B64":return function(ne,ie,oe){return function(se,ae,ue,ce){let he,fe,le,de,pe,we,me,ge=0;const ye=ae||[0],_e=(ue=ue||0)>>>3,Be=ce===-1?3:0,be=se.indexOf("=");if(se.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(se=se.replace(/=/g,""),be!==-1&&be<se.length)throw new Error("Invalid '=' found in base-64 string");for(fe=0;fe<se.length;fe+=4){for(pe=se.substr(fe,4),de=0,le=0;le<pe.length;le+=1)he=t.indexOf(pe.charAt(le)),de|=he<<18-6*le;for(le=0;le<pe.length-1;le+=1){for(me=ge+_e,we=me>>>2;ye.length<=we;)ye.push(0);ye[we]|=(de>>>16-8*le&255)<<8*(Be+ce*(me%4)),ge+=1}}return{value:ye,binLen:8*ge+ue}}(ne,ie,oe,te)};case"BYTES":return function(ne,ie,oe){return function(se,ae,ue,ce){let he,fe,le,de;const pe=ae||[0],we=(ue=ue||0)>>>3,me=ce===-1?3:0;for(fe=0;fe<se.length;fe+=1)he=se.charCodeAt(fe),de=fe+we,le=de>>>2,pe.length<=le&&pe.push(0),pe[le]|=he<<8*(me+ce*(de%4));return{value:pe,binLen:8*se.length+ue}}(ne,ie,oe,te)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(ne,ie,oe){return function(se,ae,ue,ce){return n(new Uint8Array(se),ae,ue,ce)}(ne,ie,oe,te)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(ne,ie,oe){return n(ne,ie,oe,te)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function r(re,ee,te,ne){switch(re){case"HEX":return function(ie){return function(oe,se,ae,ue){let ce,he,fe="";const le=se/8,de=ae===-1?3:0;for(ce=0;ce<le;ce+=1)he=oe[ce>>>2]>>>8*(de+ae*(ce%4)),fe+="0123456789abcdef".charAt(he>>>4&15)+"0123456789abcdef".charAt(15&he);return ue.outputUpper?fe.toUpperCase():fe}(ie,ee,te,ne)};case"B64":return function(ie){return function(oe,se,ae,ue){let ce,he,fe,le,de,pe="";const we=se/8,me=ae===-1?3:0;for(ce=0;ce<we;ce+=3)for(le=ce+1<we?oe[ce+1>>>2]:0,de=ce+2<we?oe[ce+2>>>2]:0,fe=(oe[ce>>>2]>>>8*(me+ae*(ce%4))&255)<<16|(le>>>8*(me+ae*((ce+1)%4))&255)<<8|de>>>8*(me+ae*((ce+2)%4))&255,he=0;he<4;he+=1)pe+=8*ce+6*he<=se?t.charAt(fe>>>6*(3-he)&63):ue.b64Pad;return pe}(ie,ee,te,ne)};case"BYTES":return function(ie){return function(oe,se,ae){let ue,ce,he="";const fe=se/8,le=ae===-1?3:0;for(ue=0;ue<fe;ue+=1)ce=oe[ue>>>2]>>>8*(le+ae*(ue%4))&255,he+=String.fromCharCode(ce);return he}(ie,ee,te)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(ie){return function(oe,se,ae){let ue;const ce=se/8,he=new ArrayBuffer(ce),fe=new Uint8Array(he),le=ae===-1?3:0;for(ue=0;ue<ce;ue+=1)fe[ue]=oe[ue>>>2]>>>8*(le+ae*(ue%4))&255;return he}(ie,ee,te)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(ie){return function(oe,se,ae){let ue;const ce=se/8,he=ae===-1?3:0,fe=new Uint8Array(ce);for(ue=0;ue<ce;ue+=1)fe[ue]=oe[ue>>>2]>>>8*(he+ae*(ue%4))&255;return fe}(ie,ee,te)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],h="Chosen SHA variant is not supported";function u(re,ee){let te,ne;const ie=re.binLen>>>3,oe=ee.binLen>>>3,se=ie<<3,ae=4-ie<<3;if(ie%4!=0){for(te=0;te<oe;te+=4)ne=ie+te>>>2,re.value[ne]|=ee.value[te>>>2]<<se,re.value.push(0),re.value[ne+1]|=ee.value[te>>>2]>>>ae;return(re.value.length<<2)-4>=oe+ie&&re.value.pop(),{value:re.value,binLen:re.binLen+ee.binLen}}return{value:re.value.concat(ee.value),binLen:re.binLen+ee.binLen}}function w(re){const ee={outputUpper:!1,b64Pad:"=",outputLen:-1},te=re||{},ne="Output length must be a multiple of 8";if(ee.outputUpper=te.outputUpper||!1,te.b64Pad&&(ee.b64Pad=te.b64Pad),te.outputLen){if(te.outputLen%8!=0)throw new Error(ne);ee.outputLen=te.outputLen}else if(te.shakeLen){if(te.shakeLen%8!=0)throw new Error(ne);ee.outputLen=te.shakeLen}if(typeof ee.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof ee.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return ee}function c(re,ee,te,ne){const ie=re+" must include a value and format";if(!ee){if(!ne)throw new Error(ie);return ne}if(ee.value===void 0||!ee.format)throw new Error(ie);return e(ee.format,ee.encoding||"UTF8",te)(ee.value)}class f{constructor(ee,te,ne){const ie=ne||{};if(this.t=te,this.i=ie.encoding||"UTF8",this.numRounds=ie.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.s=ee,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(ee){let te,ne=0;const ie=this.p>>>5,oe=this.m(ee,this.o,this.h),se=oe.binLen,ae=oe.value,ue=se>>>5;for(te=0;te<ue;te+=ie)ne+this.p<=se&&(this.C=this.R(ae.slice(te,te+ie),this.C),ne+=this.p);this.l+=ne,this.o=ae.slice(ne>>>5),this.h=se%this.p,this.u=!0}getHash(ee,te){let ne,ie,oe=this.U;const se=w(te);if(this.v){if(se.outputLen===-1)throw new Error("Output length must be specified in options");oe=se.outputLen}const ae=r(ee,oe,this.K,se);if(this.A&&this.T)return ae(this.T(se));for(ie=this.F(this.o.slice(),this.h,this.l,this.g(this.C),oe),ne=1;ne<this.numRounds;ne+=1)this.v&&oe%32!=0&&(ie[ie.length-1]&=16777215>>>24-oe%32),ie=this.F(ie,oe,0,this.B(this.s),oe);return ae(ie)}setHMACKey(ee,te,ne){if(!this.L)throw new Error("Variant does not support HMAC");if(this.u)throw new Error("Cannot set MAC key after calling update");const ie=e(te,(ne||{}).encoding||"UTF8",this.K);this.M(ie(ee))}M(ee){const te=this.p>>>3,ne=te/4-1;let ie;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(te<ee.binLen/8&&(ee.value=this.F(ee.value,ee.binLen,0,this.B(this.s),this.U));ee.value.length<=ne;)ee.value.push(0);for(ie=0;ie<=ne;ie+=1)this.H[ie]=909522486^ee.value[ie],this.S[ie]=1549556828^ee.value[ie];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(ee,te){const ne=w(te);return r(ee,this.U,this.K,ne)(this.k())}k(){let ee;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");const te=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return ee=this.R(this.S,this.B(this.s)),ee=this.F(te,this.U,this.p,ee,this.U),ee}}function a(re,ee){return re<<ee|re>>>32-ee}function l(re,ee){return re>>>ee|re<<32-ee}function A(re,ee){return re>>>ee}function E(re,ee,te){return re^ee^te}function H(re,ee,te){return re&ee^~re&te}function S(re,ee,te){return re&ee^re&te^ee&te}function b(re){return l(re,2)^l(re,13)^l(re,22)}function p(re,ee){const te=(65535&re)+(65535&ee);return(65535&(re>>>16)+(ee>>>16)+(te>>>16))<<16|65535&te}function d(re,ee,te,ne){const ie=(65535&re)+(65535&ee)+(65535&te)+(65535&ne);return(65535&(re>>>16)+(ee>>>16)+(te>>>16)+(ne>>>16)+(ie>>>16))<<16|65535&ie}function m(re,ee,te,ne,ie){const oe=(65535&re)+(65535&ee)+(65535&te)+(65535&ne)+(65535&ie);return(65535&(re>>>16)+(ee>>>16)+(te>>>16)+(ne>>>16)+(ie>>>16)+(oe>>>16))<<16|65535&oe}function C(re){return l(re,7)^l(re,18)^A(re,3)}function y(re){return l(re,6)^l(re,11)^l(re,25)}function R(re){return[1732584193,4023233417,2562383102,271733878,3285377520]}function U(re,ee){let te,ne,ie,oe,se,ae,ue;const ce=[];for(te=ee[0],ne=ee[1],ie=ee[2],oe=ee[3],se=ee[4],ue=0;ue<80;ue+=1)ce[ue]=ue<16?re[ue]:a(ce[ue-3]^ce[ue-8]^ce[ue-14]^ce[ue-16],1),ae=ue<20?m(a(te,5),H(ne,ie,oe),se,1518500249,ce[ue]):ue<40?m(a(te,5),E(ne,ie,oe),se,1859775393,ce[ue]):ue<60?m(a(te,5),S(ne,ie,oe),se,2400959708,ce[ue]):m(a(te,5),E(ne,ie,oe),se,3395469782,ce[ue]),se=oe,oe=ie,ie=a(ne,30),ne=te,te=ae;return ee[0]=p(te,ee[0]),ee[1]=p(ne,ee[1]),ee[2]=p(ie,ee[2]),ee[3]=p(oe,ee[3]),ee[4]=p(se,ee[4]),ee}function v(re,ee,te,ne){let ie;const oe=15+(ee+65>>>9<<4),se=ee+te;for(;re.length<=oe;)re.push(0);for(re[ee>>>5]|=128<<24-ee%32,re[oe]=4294967295&se,re[oe-1]=se/4294967296|0,ie=0;ie<re.length;ie+=16)ne=U(re.slice(ie,ie+16),ne);return ne}class K extends f{constructor(ee,te,ne){if(ee!=="SHA-1")throw new Error(h);super(ee,te,ne);const ie=ne||{};this.L=!0,this.T=this.k,this.K=-1,this.m=e(this.t,this.i,this.K),this.R=U,this.g=function(oe){return oe.slice()},this.B=R,this.F=v,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,ie.hmacKey&&this.M(c("hmacKey",ie.hmacKey,this.K))}}function T(re){let ee;return ee=re=="SHA-224"?s.slice():o.slice(),ee}function F(re,ee){let te,ne,ie,oe,se,ae,ue,ce,he,fe,le;const de=[];for(te=ee[0],ne=ee[1],ie=ee[2],oe=ee[3],se=ee[4],ae=ee[5],ue=ee[6],ce=ee[7],le=0;le<64;le+=1)de[le]=le<16?re[le]:d(l(pe=de[le-2],17)^l(pe,19)^A(pe,10),de[le-7],C(de[le-15]),de[le-16]),he=m(ce,y(se),H(se,ae,ue),i[le],de[le]),fe=p(b(te),S(te,ne,ie)),ce=ue,ue=ae,ae=se,se=p(oe,he),oe=ie,ie=ne,ne=te,te=p(he,fe);var pe;return ee[0]=p(te,ee[0]),ee[1]=p(ne,ee[1]),ee[2]=p(ie,ee[2]),ee[3]=p(oe,ee[3]),ee[4]=p(se,ee[4]),ee[5]=p(ae,ee[5]),ee[6]=p(ue,ee[6]),ee[7]=p(ce,ee[7]),ee}class g extends f{constructor(ee,te,ne){if(ee!=="SHA-224"&&ee!=="SHA-256")throw new Error(h);super(ee,te,ne);const ie=ne||{};this.T=this.k,this.L=!0,this.K=-1,this.m=e(this.t,this.i,this.K),this.R=F,this.g=function(oe){return oe.slice()},this.B=T,this.F=function(oe,se,ae,ue){return function(ce,he,fe,le,de){let pe,we;const me=15+(he+65>>>9<<4),ge=he+fe;for(;ce.length<=me;)ce.push(0);for(ce[he>>>5]|=128<<24-he%32,ce[me]=4294967295&ge,ce[me-1]=ge/4294967296|0,pe=0;pe<ce.length;pe+=16)le=F(ce.slice(pe,pe+16),le);return we=de==="SHA-224"?[le[0],le[1],le[2],le[3],le[4],le[5],le[6]]:le,we}(oe,se,ae,ue,ee)},this.C=T(ee),this.p=512,this.U=ee==="SHA-224"?224:256,this.v=!1,ie.hmacKey&&this.M(c("hmacKey",ie.hmacKey,this.K))}}class B{constructor(ee,te){this.Y=ee,this.N=te}}function L(re,ee){let te;return ee>32?(te=64-ee,new B(re.N<<ee|re.Y>>>te,re.Y<<ee|re.N>>>te)):ee!==0?(te=32-ee,new B(re.Y<<ee|re.N>>>te,re.N<<ee|re.Y>>>te)):re}function M(re,ee){let te;return ee<32?(te=32-ee,new B(re.Y>>>ee|re.N<<te,re.N>>>ee|re.Y<<te)):(te=64-ee,new B(re.N>>>ee|re.Y<<te,re.Y>>>ee|re.N<<te))}function k(re,ee){return new B(re.Y>>>ee,re.N>>>ee|re.Y<<32-ee)}function Y(re,ee,te){return new B(re.Y&ee.Y^re.Y&te.Y^ee.Y&te.Y,re.N&ee.N^re.N&te.N^ee.N&te.N)}function N(re){const ee=M(re,28),te=M(re,34),ne=M(re,39);return new B(ee.Y^te.Y^ne.Y,ee.N^te.N^ne.N)}function I(re,ee){let te,ne;te=(65535&re.N)+(65535&ee.N),ne=(re.N>>>16)+(ee.N>>>16)+(te>>>16);const ie=(65535&ne)<<16|65535&te;return te=(65535&re.Y)+(65535&ee.Y)+(ne>>>16),ne=(re.Y>>>16)+(ee.Y>>>16)+(te>>>16),new B((65535&ne)<<16|65535&te,ie)}function X(re,ee,te,ne){let ie,oe;ie=(65535&re.N)+(65535&ee.N)+(65535&te.N)+(65535&ne.N),oe=(re.N>>>16)+(ee.N>>>16)+(te.N>>>16)+(ne.N>>>16)+(ie>>>16);const se=(65535&oe)<<16|65535&ie;return ie=(65535&re.Y)+(65535&ee.Y)+(65535&te.Y)+(65535&ne.Y)+(oe>>>16),oe=(re.Y>>>16)+(ee.Y>>>16)+(te.Y>>>16)+(ne.Y>>>16)+(ie>>>16),new B((65535&oe)<<16|65535&ie,se)}function z(re,ee,te,ne,ie){let oe,se;oe=(65535&re.N)+(65535&ee.N)+(65535&te.N)+(65535&ne.N)+(65535&ie.N),se=(re.N>>>16)+(ee.N>>>16)+(te.N>>>16)+(ne.N>>>16)+(ie.N>>>16)+(oe>>>16);const ae=(65535&se)<<16|65535&oe;return oe=(65535&re.Y)+(65535&ee.Y)+(65535&te.Y)+(65535&ne.Y)+(65535&ie.Y)+(se>>>16),se=(re.Y>>>16)+(ee.Y>>>16)+(te.Y>>>16)+(ne.Y>>>16)+(ie.Y>>>16)+(oe>>>16),new B((65535&se)<<16|65535&oe,ae)}function x(re,ee){return new B(re.Y^ee.Y,re.N^ee.N)}function _(re){const ee=M(re,19),te=M(re,61),ne=k(re,6);return new B(ee.Y^te.Y^ne.Y,ee.N^te.N^ne.N)}function O(re){const ee=M(re,1),te=M(re,8),ne=k(re,7);return new B(ee.Y^te.Y^ne.Y,ee.N^te.N^ne.N)}function P(re){const ee=M(re,14),te=M(re,18),ne=M(re,41);return new B(ee.Y^te.Y^ne.Y,ee.N^te.N^ne.N)}const V=[new B(i[0],3609767458),new B(i[1],602891725),new B(i[2],3964484399),new B(i[3],2173295548),new B(i[4],4081628472),new B(i[5],3053834265),new B(i[6],2937671579),new B(i[7],3664609560),new B(i[8],2734883394),new B(i[9],1164996542),new B(i[10],1323610764),new B(i[11],3590304994),new B(i[12],4068182383),new B(i[13],991336113),new B(i[14],633803317),new B(i[15],3479774868),new B(i[16],2666613458),new B(i[17],944711139),new B(i[18],2341262773),new B(i[19],2007800933),new B(i[20],1495990901),new B(i[21],1856431235),new B(i[22],3175218132),new B(i[23],2198950837),new B(i[24],3999719339),new B(i[25],766784016),new B(i[26],2566594879),new B(i[27],3203337956),new B(i[28],1034457026),new B(i[29],2466948901),new B(i[30],3758326383),new B(i[31],168717936),new B(i[32],1188179964),new B(i[33],1546045734),new B(i[34],1522805485),new B(i[35],2643833823),new B(i[36],2343527390),new B(i[37],1014477480),new B(i[38],1206759142),new B(i[39],344077627),new B(i[40],1290863460),new B(i[41],3158454273),new B(i[42],3505952657),new B(i[43],106217008),new B(i[44],3606008344),new B(i[45],1432725776),new B(i[46],1467031594),new B(i[47],851169720),new B(i[48],3100823752),new B(i[49],1363258195),new B(i[50],3750685593),new B(i[51],3785050280),new B(i[52],3318307427),new B(i[53],3812723403),new B(i[54],2003034995),new B(i[55],3602036899),new B(i[56],1575990012),new B(i[57],1125592928),new B(i[58],2716904306),new B(i[59],442776044),new B(i[60],593698344),new B(i[61],3733110249),new B(i[62],2999351573),new B(i[63],3815920427),new B(3391569614,3928383900),new B(3515267271,566280711),new B(3940187606,3454069534),new B(4118630271,4000239992),new B(116418474,1914138554),new B(174292421,2731055270),new B(289380356,3203993006),new B(460393269,320620315),new B(685471733,587496836),new B(852142971,1086792851),new B(1017036298,365543100),new B(1126000580,2618297676),new B(1288033470,3409855158),new B(1501505948,4234509866),new B(1607167915,987167468),new B(1816402316,1246189591)];function Z(re){return re==="SHA-384"?[new B(3418070365,s[0]),new B(1654270250,s[1]),new B(2438529370,s[2]),new B(355462360,s[3]),new B(1731405415,s[4]),new B(41048885895,s[5]),new B(3675008525,s[6]),new B(1203062813,s[7])]:[new B(o[0],4089235720),new B(o[1],2227873595),new B(o[2],4271175723),new B(o[3],1595750129),new B(o[4],2917565137),new B(o[5],725511199),new B(o[6],4215389547),new B(o[7],327033209)]}function j(re,ee){let te,ne,ie,oe,se,ae,ue,ce,he,fe,le,de;const pe=[];for(te=ee[0],ne=ee[1],ie=ee[2],oe=ee[3],se=ee[4],ae=ee[5],ue=ee[6],ce=ee[7],le=0;le<80;le+=1)le<16?(de=2*le,pe[le]=new B(re[de],re[de+1])):pe[le]=X(_(pe[le-2]),pe[le-7],O(pe[le-15]),pe[le-16]),he=z(ce,P(se),(me=ae,ge=ue,new B((we=se).Y&me.Y^~we.Y&ge.Y,we.N&me.N^~we.N&ge.N)),V[le],pe[le]),fe=I(N(te),Y(te,ne,ie)),ce=ue,ue=ae,ae=se,se=I(oe,he),oe=ie,ie=ne,ne=te,te=I(he,fe);var we,me,ge;return ee[0]=I(te,ee[0]),ee[1]=I(ne,ee[1]),ee[2]=I(ie,ee[2]),ee[3]=I(oe,ee[3]),ee[4]=I(se,ee[4]),ee[5]=I(ae,ee[5]),ee[6]=I(ue,ee[6]),ee[7]=I(ce,ee[7]),ee}class q extends f{constructor(ee,te,ne){if(ee!=="SHA-384"&&ee!=="SHA-512")throw new Error(h);super(ee,te,ne);const ie=ne||{};this.T=this.k,this.L=!0,this.K=-1,this.m=e(this.t,this.i,this.K),this.R=j,this.g=function(oe){return oe.slice()},this.B=Z,this.F=function(oe,se,ae,ue){return function(ce,he,fe,le,de){let pe,we;const me=31+(he+129>>>10<<5),ge=he+fe;for(;ce.length<=me;)ce.push(0);for(ce[he>>>5]|=128<<24-he%32,ce[me]=4294967295&ge,ce[me-1]=ge/4294967296|0,pe=0;pe<ce.length;pe+=32)le=j(ce.slice(pe,pe+32),le);return we=de==="SHA-384"?[(le=le)[0].Y,le[0].N,le[1].Y,le[1].N,le[2].Y,le[2].N,le[3].Y,le[3].N,le[4].Y,le[4].N,le[5].Y,le[5].N]:[le[0].Y,le[0].N,le[1].Y,le[1].N,le[2].Y,le[2].N,le[3].Y,le[3].N,le[4].Y,le[4].N,le[5].Y,le[5].N,le[6].Y,le[6].N,le[7].Y,le[7].N],we}(oe,se,ae,ue,ee)},this.C=Z(ee),this.p=1024,this.U=ee==="SHA-384"?384:512,this.v=!1,ie.hmacKey&&this.M(c("hmacKey",ie.hmacKey,this.K))}}const D=[new B(0,1),new B(0,32898),new B(2147483648,32906),new B(2147483648,2147516416),new B(0,32907),new B(0,2147483649),new B(2147483648,2147516545),new B(2147483648,32777),new B(0,138),new B(0,136),new B(0,2147516425),new B(0,2147483658),new B(0,2147516555),new B(2147483648,139),new B(2147483648,32905),new B(2147483648,32771),new B(2147483648,32770),new B(2147483648,128),new B(0,32778),new B(2147483648,2147483658),new B(2147483648,2147516545),new B(2147483648,32896),new B(0,2147483649),new B(2147483648,2147516424)],G=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function J(re){let ee;const te=[];for(ee=0;ee<5;ee+=1)te[ee]=[new B(0,0),new B(0,0),new B(0,0),new B(0,0),new B(0,0)];return te}function Q(re){let ee;const te=[];for(ee=0;ee<5;ee+=1)te[ee]=re[ee].slice();return te}function W(re,ee){let te,ne,ie,oe;const se=[],ae=[];if(re!==null)for(ne=0;ne<re.length;ne+=2)ee[(ne>>>1)%5][(ne>>>1)/5|0]=x(ee[(ne>>>1)%5][(ne>>>1)/5|0],new B(re[ne+1],re[ne]));for(te=0;te<24;te+=1){for(oe=J(),ne=0;ne<5;ne+=1)se[ne]=(ue=ee[ne][0],ce=ee[ne][1],he=ee[ne][2],fe=ee[ne][3],le=ee[ne][4],new B(ue.Y^ce.Y^he.Y^fe.Y^le.Y,ue.N^ce.N^he.N^fe.N^le.N));for(ne=0;ne<5;ne+=1)ae[ne]=x(se[(ne+4)%5],L(se[(ne+1)%5],1));for(ne=0;ne<5;ne+=1)for(ie=0;ie<5;ie+=1)ee[ne][ie]=x(ee[ne][ie],ae[ne]);for(ne=0;ne<5;ne+=1)for(ie=0;ie<5;ie+=1)oe[ie][(2*ne+3*ie)%5]=L(ee[ne][ie],G[ne][ie]);for(ne=0;ne<5;ne+=1)for(ie=0;ie<5;ie+=1)ee[ne][ie]=x(oe[ne][ie],new B(~oe[(ne+1)%5][ie].Y&oe[(ne+2)%5][ie].Y,~oe[(ne+1)%5][ie].N&oe[(ne+2)%5][ie].N));ee[0][0]=x(ee[0][0],D[te])}var ue,ce,he,fe,le;return ee}function $(re){let ee,te,ne=0;const ie=[0,0],oe=[4294967295&re,re/4294967296&2097151];for(ee=6;ee>=0;ee--)te=oe[ee>>2]>>>8*ee&255,te===0&&ne===0||(ie[ne+1>>2]|=te<<8*(ne+1),ne+=1);return ne=ne!==0?ne:1,ie[0]|=ne,{value:ne+1>4?ie:[ie[0]],binLen:8+8*ne}}function tt(re){return u($(re.binLen),re)}function nt(re,ee){let te,ne=$(ee);ne=u(ne,re);const ie=ee>>>2,oe=(ie-ne.value.length%ie)%ie;for(te=0;te<oe;te++)ne.value.push(0);return ne.value}class et extends f{constructor(ee,te,ne){let ie=6,oe=0;super(ee,te,ne);const se=ne||{};if(this.numRounds!==1){if(se.kmacKey||se.hmacKey)throw new Error("Cannot set numRounds with MAC");if(this.s==="CSHAKE128"||this.s==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.K=1,this.m=e(this.t,this.i,this.K),this.R=W,this.g=Q,this.B=J,this.C=J(),this.v=!1,ee){case"SHA3-224":this.p=oe=1152,this.U=224,this.L=!0,this.T=this.k;break;case"SHA3-256":this.p=oe=1088,this.U=256,this.L=!0,this.T=this.k;break;case"SHA3-384":this.p=oe=832,this.U=384,this.L=!0,this.T=this.k;break;case"SHA3-512":this.p=oe=576,this.U=512,this.L=!0,this.T=this.k;break;case"SHAKE128":ie=31,this.p=oe=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"SHAKE256":ie=31,this.p=oe=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"KMAC128":ie=4,this.p=oe=1344,this.I(ne),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"KMAC256":ie=4,this.p=oe=1088,this.I(ne),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"CSHAKE128":this.p=oe=1344,ie=this._(ne),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"CSHAKE256":this.p=oe=1088,ie=this._(ne),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(h)}this.F=function(ae,ue,ce,he,fe){return function(le,de,pe,we,me,ge,ye){let _e,Be,be=0;const Ae=[],Ee=me>>>5,Se=de>>>5;for(_e=0;_e<Se&&de>=me;_e+=Ee)we=W(le.slice(_e,_e+Ee),we),de-=me;for(le=le.slice(_e),de%=me;le.length<Ee;)le.push(0);for(_e=de>>>3,le[_e>>2]^=ge<<_e%4*8,le[Ee-1]^=2147483648,we=W(le,we);32*Ae.length<ye&&(Be=we[be%5][be/5|0],Ae.push(Be.N),!(32*Ae.length>=ye));)Ae.push(Be.Y),be+=1,64*be%me==0&&(W(null,we),be=0);return Ae}(ae,ue,0,he,oe,ie,fe)},se.hmacKey&&this.M(c("hmacKey",se.hmacKey,this.K))}_(ee,te){const ne=function(oe){const se=oe||{};return{funcName:c("funcName",se.funcName,1,{value:[],binLen:0}),customization:c("Customization",se.customization,1,{value:[],binLen:0})}}(ee||{});te&&(ne.funcName=te);const ie=u(tt(ne.funcName),tt(ne.customization));if(ne.customization.binLen!==0||ne.funcName.binLen!==0){const oe=nt(ie,this.p>>>3);for(let se=0;se<oe.length;se+=this.p>>>5)this.C=this.R(oe.slice(se,se+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(ee){const te=function(ie){const oe=ie||{};return{kmacKey:c("kmacKey",oe.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:c("Customization",oe.customization,1,{value:[],binLen:0})}}(ee||{});this._(ee,te.funcName);const ne=nt(tt(te.kmacKey),this.p>>>3);for(let ie=0;ie<ne.length;ie+=this.p>>>5)this.C=this.R(ne.slice(ie,ie+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(ee){const te=u({value:this.o.slice(),binLen:this.h},function(ne){let ie,oe,se=0;const ae=[0,0],ue=[4294967295&ne,ne/4294967296&2097151];for(ie=6;ie>=0;ie--)oe=ue[ie>>2]>>>8*ie&255,oe===0&&se===0||(ae[se>>2]|=oe<<8*se,se+=1);return se=se!==0?se:1,ae[se>>2]|=se<<8*se,{value:se+1>4?ae:[ae[0]],binLen:8+8*se}}(ee.outputLen));return this.F(te.value,te.binLen,this.l,this.g(this.C),ee.outputLen)}}class jsSHA{constructor(ee,te,ne){if(ee=="SHA-1")this.O=new K(ee,te,ne);else if(ee=="SHA-224"||ee=="SHA-256")this.O=new g(ee,te,ne);else if(ee=="SHA-384"||ee=="SHA-512")this.O=new q(ee,te,ne);else{if(ee!="SHA3-224"&&ee!="SHA3-256"&&ee!="SHA3-384"&&ee!="SHA3-512"&&ee!="SHAKE128"&&ee!="SHAKE256"&&ee!="CSHAKE128"&&ee!="CSHAKE256"&&ee!="KMAC128"&&ee!="KMAC256")throw new Error(h);this.O=new et(ee,te,ne)}}update(ee){this.O.update(ee)}getHash(ee,te){return this.O.getHash(ee,te)}setHMACKey(ee,te,ne){this.O.setHMACKey(ee,te,ne)}getHMAC(ee,te){return this.O.getHMAC(ee,te)}}const globalScope=(()=>{if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"__GLOBALTHIS__",{get(){return this},configurable:!0});try{if(typeof __GLOBALTHIS__<"u")return __GLOBALTHIS__}finally{delete Object.prototype.__GLOBALTHIS__}if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global})(),isNode=Object.prototype.toString.call(globalScope.process)==="[object process]",nodeRequire=isNode?eval("require"):()=>{},NodeCrypto$2=isNode?nodeRequire("crypto"):void 0,OPENSSL_TO_JSSHA_ALGO={SHA1:"SHA-1",SHA224:"SHA-224",SHA256:"SHA-256",SHA384:"SHA-384",SHA512:"SHA-512","SHA3-224":"SHA3-224","SHA3-256":"SHA3-256","SHA3-384":"SHA3-384","SHA3-512":"SHA3-512"},hmacDigest=(re,ee,te)=>{if(isNode){const ne=NodeCrypto$2.createHmac(re,globalScope.Buffer.from(ee));return ne.update(globalScope.Buffer.from(te)),ne.digest().buffer}else{const ne=OPENSSL_TO_JSSHA_ALGO[re.toUpperCase()];if(typeof ne>"u")throw new TypeError("Unknown hash function");const ie=new jsSHA(ne,"ARRAYBUFFER");return ie.setHMACKey(ee,"ARRAYBUFFER"),ie.update(te),ie.getHMAC("ARRAYBUFFER")}},pad=(re,ee)=>{let te="",ne=ee-String(re).length;for(;ne-- >0;)te+="0";return`${te}${re}`},ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",base32ToBuf=re=>{let ee=re.length;for(;re[ee-1]==="=";)--ee;const te=(ee<re.length?re.substring(0,ee):re).toUpperCase(),ne=new ArrayBuffer(te.length*5/8|0),ie=new Uint8Array(ne);let oe=0,se=0,ae=0;for(let ue=0;ue<te.length;ue++){const ce=ALPHABET.indexOf(te[ue]);if(ce===-1)throw new TypeError(`Invalid character found: ${te[ue]}`);se=se<<5|ce,oe+=5,oe>=8&&(oe-=8,ie[ae++]=se>>>oe)}return ne},base32FromBuf=re=>{const ee=new Uint8Array(re);let te=0,ne=0,ie="";for(let oe=0;oe<ee.length;oe++)for(ne=ne<<8|ee[oe],te+=8;te>=5;)ie+=ALPHABET[ne>>>te-5&31],te-=5;return te>0&&(ie+=ALPHABET[ne<<5-te&31]),ie},hexToBuf=re=>{const ee=new ArrayBuffer(re.length/2),te=new Uint8Array(ee);for(let ne=0;ne<re.length;ne+=2)te[ne/2]=parseInt(re.substr(ne,2),16);return ee},hexFromBuf=re=>{const ee=new Uint8Array(re);let te="";for(let ne=0;ne<ee.length;ne++){const ie=ee[ne].toString(16);ie.length===1&&(te+="0"),te+=ie}return te.toUpperCase()},latin1ToBuf=re=>{const ee=new ArrayBuffer(re.length),te=new Uint8Array(ee);for(let ne=0;ne<re.length;ne++)te[ne]=re.charCodeAt(ne)&255;return ee},latin1FromBuf=re=>{const ee=new Uint8Array(re);let te="";for(let ne=0;ne<ee.length;ne++)te+=String.fromCharCode(ee[ne]);return te},ENCODER=globalScope.TextEncoder?new globalScope.TextEncoder("utf-8"):null,DECODER=globalScope.TextDecoder?new globalScope.TextDecoder("utf-8"):null,utf8ToBuf=re=>{if(!ENCODER)throw new Error("Encoding API not available");return ENCODER.encode(re).buffer},utf8FromBuf=re=>{if(!DECODER)throw new Error("Encoding API not available");return DECODER.decode(re)},NodeCrypto$1=isNode?nodeRequire("crypto"):void 0,randomBytes=re=>{if(isNode)return NodeCrypto$1.randomBytes(re).buffer;if(!globalScope.crypto||!globalScope.crypto.getRandomValues)throw new Error("Cryptography API not available");return globalScope.crypto.getRandomValues(new Uint8Array(re)).buffer};class Secret{constructor(){let{buffer:ee,size:te=20}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.buffer=typeof ee>"u"?randomBytes(te):ee}static fromLatin1(ee){return new Secret({buffer:latin1ToBuf(ee)})}static fromUTF8(ee){return new Secret({buffer:utf8ToBuf(ee)})}static fromBase32(ee){return new Secret({buffer:base32ToBuf(ee)})}static fromHex(ee){return new Secret({buffer:hexToBuf(ee)})}get latin1(){return Object.defineProperty(this,"latin1",{enumerable:!0,value:latin1FromBuf(this.buffer)}),this.latin1}get utf8(){return Object.defineProperty(this,"utf8",{enumerable:!0,value:utf8FromBuf(this.buffer)}),this.utf8}get base32(){return Object.defineProperty(this,"base32",{enumerable:!0,value:base32FromBuf(this.buffer)}),this.base32}get hex(){return Object.defineProperty(this,"hex",{enumerable:!0,value:hexFromBuf(this.buffer)}),this.hex}}const NodeCrypto=isNode?nodeRequire("crypto"):void 0,timingSafeEqual=(re,ee)=>{if(isNode)return NodeCrypto.timingSafeEqual(globalScope.Buffer.from(re),globalScope.Buffer.from(ee));{if(re.length!==ee.length)throw new TypeError("Input strings must have the same length");let te=-1,ne=0;for(;++te<re.length;)ne|=re.charCodeAt(te)^ee.charCodeAt(te);return ne===0}};class HOTP{static get defaults(){return{issuer:"",label:"OTPAuth",algorithm:"SHA1",digits:6,counter:0,window:1}}constructor(){let{issuer:ee=HOTP.defaults.issuer,label:te=HOTP.defaults.label,secret:ne=new Secret,algorithm:ie=HOTP.defaults.algorithm,digits:oe=HOTP.defaults.digits,counter:se=HOTP.defaults.counter}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.issuer=ee,this.label=te,this.secret=typeof ne=="string"?Secret.fromBase32(ne):ne,this.algorithm=ie.toUpperCase(),this.digits=oe,this.counter=se}static generate(ee){let{secret:te,algorithm:ne=HOTP.defaults.algorithm,digits:ie=HOTP.defaults.digits,counter:oe=HOTP.defaults.counter}=ee;const se=new Uint8Array(hmacDigest(ne,te.buffer,uintToBuf(oe))),ae=se[se.byteLength-1]&15,ue=((se[ae]&127)<<24|(se[ae+1]&255)<<16|(se[ae+2]&255)<<8|se[ae+3]&255)%10**ie;return pad(ue,ie)}generate(){let{counter:ee=this.counter++}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return HOTP.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:ee})}static validate(ee){let{token:te,secret:ne,algorithm:ie,digits:oe,counter:se=HOTP.defaults.counter,window:ae=HOTP.defaults.window}=ee;if(te.length!==oe)return null;let ue=null;for(let ce=se-ae;ce<=se+ae;++ce){const he=HOTP.generate({secret:ne,algorithm:ie,digits:oe,counter:ce});timingSafeEqual(te,he)&&(ue=ce-se)}return ue}validate(ee){let{token:te,counter:ne=this.counter,window:ie}=ee;return HOTP.validate({token:te,secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:ne,window:ie})}toString(){const ee=encodeURIComponent;return`otpauth://hotp/${this.issuer.length>0?`${ee(this.issuer)}:${ee(this.label)}?issuer=${ee(this.issuer)}&`:`${ee(this.label)}?`}secret=${ee(this.secret.base32)}&algorithm=${ee(this.algorithm)}&digits=${ee(this.digits)}&counter=${ee(this.counter)}`}}class TOTP{static get defaults(){return{issuer:"",label:"OTPAuth",algorithm:"SHA1",digits:6,period:30,window:1}}constructor(){let{issuer:ee=TOTP.defaults.issuer,label:te=TOTP.defaults.label,secret:ne=new Secret,algorithm:ie=TOTP.defaults.algorithm,digits:oe=TOTP.defaults.digits,period:se=TOTP.defaults.period}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.issuer=ee,this.label=te,this.secret=typeof ne=="string"?Secret.fromBase32(ne):ne,this.algorithm=ie.toUpperCase(),this.digits=oe,this.period=se}static generate(ee){let{secret:te,algorithm:ne,digits:ie,period:oe=TOTP.defaults.period,timestamp:se=Date.now()}=ee;return HOTP.generate({secret:te,algorithm:ne,digits:ie,counter:Math.floor(se/1e3/oe)})}generate(){let{timestamp:ee=Date.now()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return TOTP.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:ee})}static validate(ee){let{token:te,secret:ne,algorithm:ie,digits:oe,period:se=TOTP.defaults.period,timestamp:ae=Date.now(),window:ue}=ee;return HOTP.validate({token:te,secret:ne,algorithm:ie,digits:oe,counter:Math.floor(ae/1e3/se),window:ue})}validate(ee){let{token:te,timestamp:ne,window:ie}=ee;return TOTP.validate({token:te,secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:ne,window:ie})}toString(){const ee=encodeURIComponent;return`otpauth://totp/${this.issuer.length>0?`${ee(this.issuer)}:${ee(this.label)}?issuer=${ee(this.issuer)}&`:`${ee(this.label)}?`}secret=${ee(this.secret.base32)}&algorithm=${ee(this.algorithm)}&digits=${ee(this.digits)}&period=${ee(this.period)}`}}function getTimeUntilTOTPChange(){return 30-new Date().getSeconds()%30}function newTOTP(re){return new TOTP({digits:6,period:30,secret:re})}function randomSecret(){return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)}const syncIcon="/assets/sync-outline.06853ffe.svg",settingsIcon="/assets/settings-outline.2e47e9ab.svg";function keybind(re){}const subscriber_queue=[];function readable(re,ee){return{subscribe:writable(re,ee).subscribe}}function writable(re,ee=noop){let te;const ne=new Set;function ie(ae){if(safe_not_equal(re,ae)&&(re=ae,te)){const ue=!subscriber_queue.length;for(const ce of ne)ce[1](),subscriber_queue.push(ce,re);if(ue){for(let ce=0;ce<subscriber_queue.length;ce+=2)subscriber_queue[ce][0](subscriber_queue[ce+1]);subscriber_queue.length=0}}}function oe(ae){ie(ae(re))}function se(ae,ue=noop){const ce=[ae,ue];return ne.add(ce),ne.size===1&&(te=ee(ie)||noop),ae(re),()=>{ne.delete(ce),ne.size===0&&(te(),te=null)}}return{set:ie,update:oe,subscribe:se}}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ee=0,te=re.length;ee<te;++ee)lookup[ee]=re[ee],revLookup[re.charCodeAt(ee)]=ee;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(re){inited||init();var ee,te,ne,ie,oe,se,ae=re.length;if(ae%4>0)throw new Error("Invalid string. Length must be a multiple of 4");oe=re[ae-2]==="="?2:re[ae-1]==="="?1:0,se=new Arr(ae*3/4-oe),ne=oe>0?ae-4:ae;var ue=0;for(ee=0,te=0;ee<ne;ee+=4,te+=3)ie=revLookup[re.charCodeAt(ee)]<<18|revLookup[re.charCodeAt(ee+1)]<<12|revLookup[re.charCodeAt(ee+2)]<<6|revLookup[re.charCodeAt(ee+3)],se[ue++]=ie>>16&255,se[ue++]=ie>>8&255,se[ue++]=ie&255;return oe===2?(ie=revLookup[re.charCodeAt(ee)]<<2|revLookup[re.charCodeAt(ee+1)]>>4,se[ue++]=ie&255):oe===1&&(ie=revLookup[re.charCodeAt(ee)]<<10|revLookup[re.charCodeAt(ee+1)]<<4|revLookup[re.charCodeAt(ee+2)]>>2,se[ue++]=ie>>8&255,se[ue++]=ie&255),se}function tripletToBase64(re){return lookup[re>>18&63]+lookup[re>>12&63]+lookup[re>>6&63]+lookup[re&63]}function encodeChunk(re,ee,te){for(var ne,ie=[],oe=ee;oe<te;oe+=3)ne=(re[oe]<<16)+(re[oe+1]<<8)+re[oe+2],ie.push(tripletToBase64(ne));return ie.join("")}function fromByteArray(re){inited||init();for(var ee,te=re.length,ne=te%3,ie="",oe=[],se=16383,ae=0,ue=te-ne;ae<ue;ae+=se)oe.push(encodeChunk(re,ae,ae+se>ue?ue:ae+se));return ne===1?(ee=re[te-1],ie+=lookup[ee>>2],ie+=lookup[ee<<4&63],ie+="=="):ne===2&&(ee=(re[te-2]<<8)+re[te-1],ie+=lookup[ee>>10],ie+=lookup[ee>>4&63],ie+=lookup[ee<<2&63],ie+="="),oe.push(ie),oe.join("")}function read(re,ee,te,ne,ie){var oe,se,ae=ie*8-ne-1,ue=(1<<ae)-1,ce=ue>>1,he=-7,fe=te?ie-1:0,le=te?-1:1,de=re[ee+fe];for(fe+=le,oe=de&(1<<-he)-1,de>>=-he,he+=ae;he>0;oe=oe*256+re[ee+fe],fe+=le,he-=8);for(se=oe&(1<<-he)-1,oe>>=-he,he+=ne;he>0;se=se*256+re[ee+fe],fe+=le,he-=8);if(oe===0)oe=1-ce;else{if(oe===ue)return se?NaN:(de?-1:1)*(1/0);se=se+Math.pow(2,ne),oe=oe-ce}return(de?-1:1)*se*Math.pow(2,oe-ne)}function write(re,ee,te,ne,ie,oe){var se,ae,ue,ce=oe*8-ie-1,he=(1<<ce)-1,fe=he>>1,le=ie===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=ne?0:oe-1,pe=ne?1:-1,we=ee<0||ee===0&&1/ee<0?1:0;for(ee=Math.abs(ee),isNaN(ee)||ee===1/0?(ae=isNaN(ee)?1:0,se=he):(se=Math.floor(Math.log(ee)/Math.LN2),ee*(ue=Math.pow(2,-se))<1&&(se--,ue*=2),se+fe>=1?ee+=le/ue:ee+=le*Math.pow(2,1-fe),ee*ue>=2&&(se++,ue/=2),se+fe>=he?(ae=0,se=he):se+fe>=1?(ae=(ee*ue-1)*Math.pow(2,ie),se=se+fe):(ae=ee*Math.pow(2,fe-1)*Math.pow(2,ie),se=0));ie>=8;re[te+de]=ae&255,de+=pe,ae/=256,ie-=8);for(se=se<<ie|ae,ce+=ie;ce>0;re[te+de]=se&255,de+=pe,se/=256,ce-=8);re[te+de-pe]|=we*128}var toString={}.toString,isArray=Array.isArray||function(re){return toString.call(re)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(re,ee){if(kMaxLength()<ee)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(re=new Uint8Array(ee),re.__proto__=Buffer.prototype):(re===null&&(re=new Buffer(ee)),re.length=ee),re}function Buffer(re,ee,te){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(re,ee,te);if(typeof re=="number"){if(typeof ee=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,re)}return from(this,re,ee,te)}Buffer.poolSize=8192;Buffer._augment=function(re){return re.__proto__=Buffer.prototype,re};function from(re,ee,te,ne){if(typeof ee=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&ee instanceof ArrayBuffer?fromArrayBuffer(re,ee,te,ne):typeof ee=="string"?fromString(re,ee,te):fromObject(re,ee)}Buffer.from=function(re,ee,te){return from(null,re,ee,te)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array);function assertSize(re){if(typeof re!="number")throw new TypeError('"size" argument must be a number');if(re<0)throw new RangeError('"size" argument must not be negative')}function alloc(re,ee,te,ne){return assertSize(ee),ee<=0?createBuffer(re,ee):te!==void 0?typeof ne=="string"?createBuffer(re,ee).fill(te,ne):createBuffer(re,ee).fill(te):createBuffer(re,ee)}Buffer.alloc=function(re,ee,te){return alloc(null,re,ee,te)};function allocUnsafe(re,ee){if(assertSize(ee),re=createBuffer(re,ee<0?0:checked(ee)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var te=0;te<ee;++te)re[te]=0;return re}Buffer.allocUnsafe=function(re){return allocUnsafe(null,re)};Buffer.allocUnsafeSlow=function(re){return allocUnsafe(null,re)};function fromString(re,ee,te){if((typeof te!="string"||te==="")&&(te="utf8"),!Buffer.isEncoding(te))throw new TypeError('"encoding" must be a valid string encoding');var ne=byteLength(ee,te)|0;re=createBuffer(re,ne);var ie=re.write(ee,te);return ie!==ne&&(re=re.slice(0,ie)),re}function fromArrayLike(re,ee){var te=ee.length<0?0:checked(ee.length)|0;re=createBuffer(re,te);for(var ne=0;ne<te;ne+=1)re[ne]=ee[ne]&255;return re}function fromArrayBuffer(re,ee,te,ne){if(ee.byteLength,te<0||ee.byteLength<te)throw new RangeError("'offset' is out of bounds");if(ee.byteLength<te+(ne||0))throw new RangeError("'length' is out of bounds");return te===void 0&&ne===void 0?ee=new Uint8Array(ee):ne===void 0?ee=new Uint8Array(ee,te):ee=new Uint8Array(ee,te,ne),Buffer.TYPED_ARRAY_SUPPORT?(re=ee,re.__proto__=Buffer.prototype):re=fromArrayLike(re,ee),re}function fromObject(re,ee){if(internalIsBuffer(ee)){var te=checked(ee.length)|0;return re=createBuffer(re,te),re.length===0||ee.copy(re,0,0,te),re}if(ee){if(typeof ArrayBuffer<"u"&&ee.buffer instanceof ArrayBuffer||"length"in ee)return typeof ee.length!="number"||isnan(ee.length)?createBuffer(re,0):fromArrayLike(re,ee);if(ee.type==="Buffer"&&isArray(ee.data))return fromArrayLike(re,ee.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(re){if(re>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return re|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(re){return!!(re!=null&&re._isBuffer)}Buffer.compare=function re(ee,te){if(!internalIsBuffer(ee)||!internalIsBuffer(te))throw new TypeError("Arguments must be Buffers");if(ee===te)return 0;for(var ne=ee.length,ie=te.length,oe=0,se=Math.min(ne,ie);oe<se;++oe)if(ee[oe]!==te[oe]){ne=ee[oe],ie=te[oe];break}return ne<ie?-1:ie<ne?1:0};Buffer.isEncoding=function re(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function re(ee,te){if(!isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(ee.length===0)return Buffer.alloc(0);var ne;if(te===void 0)for(te=0,ne=0;ne<ee.length;++ne)te+=ee[ne].length;var ie=Buffer.allocUnsafe(te),oe=0;for(ne=0;ne<ee.length;++ne){var se=ee[ne];if(!internalIsBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(ie,oe),oe+=se.length}return ie};function byteLength(re,ee){if(internalIsBuffer(re))return re.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(re)||re instanceof ArrayBuffer))return re.byteLength;typeof re!="string"&&(re=""+re);var te=re.length;if(te===0)return 0;for(var ne=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":case void 0:return utf8ToBytes(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te*2;case"hex":return te>>>1;case"base64":return base64ToBytes(re).length;default:if(ne)return utf8ToBytes(re).length;ee=(""+ee).toLowerCase(),ne=!0}}Buffer.byteLength=byteLength;function slowToString(re,ee,te){var ne=!1;if((ee===void 0||ee<0)&&(ee=0),ee>this.length||((te===void 0||te>this.length)&&(te=this.length),te<=0)||(te>>>=0,ee>>>=0,te<=ee))return"";for(re||(re="utf8");;)switch(re){case"hex":return hexSlice(this,ee,te);case"utf8":case"utf-8":return utf8Slice(this,ee,te);case"ascii":return asciiSlice(this,ee,te);case"latin1":case"binary":return latin1Slice(this,ee,te);case"base64":return base64Slice(this,ee,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,ee,te);default:if(ne)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ne=!0}}Buffer.prototype._isBuffer=!0;function swap(re,ee,te){var ne=re[ee];re[ee]=re[te],re[te]=ne}Buffer.prototype.swap16=function re(){var ee=this.length;if(ee%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<ee;te+=2)swap(this,te,te+1);return this};Buffer.prototype.swap32=function re(){var ee=this.length;if(ee%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<ee;te+=4)swap(this,te,te+3),swap(this,te+1,te+2);return this};Buffer.prototype.swap64=function re(){var ee=this.length;if(ee%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<ee;te+=8)swap(this,te,te+7),swap(this,te+1,te+6),swap(this,te+2,te+5),swap(this,te+3,te+4);return this};Buffer.prototype.toString=function re(){var ee=this.length|0;return ee===0?"":arguments.length===0?utf8Slice(this,0,ee):slowToString.apply(this,arguments)};Buffer.prototype.equals=function re(ee){if(!internalIsBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee?!0:Buffer.compare(this,ee)===0};Buffer.prototype.inspect=function re(){var ee="",te=INSPECT_MAX_BYTES;return this.length>0&&(ee=this.toString("hex",0,te).match(/.{2}/g).join(" "),this.length>te&&(ee+=" ... ")),"<Buffer "+ee+">"};Buffer.prototype.compare=function re(ee,te,ne,ie,oe){if(!internalIsBuffer(ee))throw new TypeError("Argument must be a Buffer");if(te===void 0&&(te=0),ne===void 0&&(ne=ee?ee.length:0),ie===void 0&&(ie=0),oe===void 0&&(oe=this.length),te<0||ne>ee.length||ie<0||oe>this.length)throw new RangeError("out of range index");if(ie>=oe&&te>=ne)return 0;if(ie>=oe)return-1;if(te>=ne)return 1;if(te>>>=0,ne>>>=0,ie>>>=0,oe>>>=0,this===ee)return 0;for(var se=oe-ie,ae=ne-te,ue=Math.min(se,ae),ce=this.slice(ie,oe),he=ee.slice(te,ne),fe=0;fe<ue;++fe)if(ce[fe]!==he[fe]){se=ce[fe],ae=he[fe];break}return se<ae?-1:ae<se?1:0};function bidirectionalIndexOf(re,ee,te,ne,ie){if(re.length===0)return-1;if(typeof te=="string"?(ne=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),te=+te,isNaN(te)&&(te=ie?0:re.length-1),te<0&&(te=re.length+te),te>=re.length){if(ie)return-1;te=re.length-1}else if(te<0)if(ie)te=0;else return-1;if(typeof ee=="string"&&(ee=Buffer.from(ee,ne)),internalIsBuffer(ee))return ee.length===0?-1:arrayIndexOf(re,ee,te,ne,ie);if(typeof ee=="number")return ee=ee&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(re,ee,te):Uint8Array.prototype.lastIndexOf.call(re,ee,te):arrayIndexOf(re,[ee],te,ne,ie);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(re,ee,te,ne,ie){var oe=1,se=re.length,ae=ee.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(re.length<2||ee.length<2)return-1;oe=2,se/=2,ae/=2,te/=2}function ue(de,pe){return oe===1?de[pe]:de.readUInt16BE(pe*oe)}var ce;if(ie){var he=-1;for(ce=te;ce<se;ce++)if(ue(re,ce)===ue(ee,he===-1?0:ce-he)){if(he===-1&&(he=ce),ce-he+1===ae)return he*oe}else he!==-1&&(ce-=ce-he),he=-1}else for(te+ae>se&&(te=se-ae),ce=te;ce>=0;ce--){for(var fe=!0,le=0;le<ae;le++)if(ue(re,ce+le)!==ue(ee,le)){fe=!1;break}if(fe)return ce}return-1}Buffer.prototype.includes=function re(ee,te,ne){return this.indexOf(ee,te,ne)!==-1};Buffer.prototype.indexOf=function re(ee,te,ne){return bidirectionalIndexOf(this,ee,te,ne,!0)};Buffer.prototype.lastIndexOf=function re(ee,te,ne){return bidirectionalIndexOf(this,ee,te,ne,!1)};function hexWrite(re,ee,te,ne){te=Number(te)||0;var ie=re.length-te;ne?(ne=Number(ne),ne>ie&&(ne=ie)):ne=ie;var oe=ee.length;if(oe%2!==0)throw new TypeError("Invalid hex string");ne>oe/2&&(ne=oe/2);for(var se=0;se<ne;++se){var ae=parseInt(ee.substr(se*2,2),16);if(isNaN(ae))return se;re[te+se]=ae}return se}function utf8Write(re,ee,te,ne){return blitBuffer(utf8ToBytes(ee,re.length-te),re,te,ne)}function asciiWrite(re,ee,te,ne){return blitBuffer(asciiToBytes(ee),re,te,ne)}function latin1Write(re,ee,te,ne){return asciiWrite(re,ee,te,ne)}function base64Write(re,ee,te,ne){return blitBuffer(base64ToBytes(ee),re,te,ne)}function ucs2Write(re,ee,te,ne){return blitBuffer(utf16leToBytes(ee,re.length-te),re,te,ne)}Buffer.prototype.write=function re(ee,te,ne,ie){if(te===void 0)ie="utf8",ne=this.length,te=0;else if(ne===void 0&&typeof te=="string")ie=te,ne=this.length,te=0;else if(isFinite(te))te=te|0,isFinite(ne)?(ne=ne|0,ie===void 0&&(ie="utf8")):(ie=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var oe=this.length-te;if((ne===void 0||ne>oe)&&(ne=oe),ee.length>0&&(ne<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");for(var se=!1;;)switch(ie){case"hex":return hexWrite(this,ee,te,ne);case"utf8":case"utf-8":return utf8Write(this,ee,te,ne);case"ascii":return asciiWrite(this,ee,te,ne);case"latin1":case"binary":return latin1Write(this,ee,te,ne);case"base64":return base64Write(this,ee,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,ee,te,ne);default:if(se)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),se=!0}};Buffer.prototype.toJSON=function re(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(re,ee,te){return ee===0&&te===re.length?fromByteArray(re):fromByteArray(re.slice(ee,te))}function utf8Slice(re,ee,te){te=Math.min(re.length,te);for(var ne=[],ie=ee;ie<te;){var oe=re[ie],se=null,ae=oe>239?4:oe>223?3:oe>191?2:1;if(ie+ae<=te){var ue,ce,he,fe;switch(ae){case 1:oe<128&&(se=oe);break;case 2:ue=re[ie+1],(ue&192)===128&&(fe=(oe&31)<<6|ue&63,fe>127&&(se=fe));break;case 3:ue=re[ie+1],ce=re[ie+2],(ue&192)===128&&(ce&192)===128&&(fe=(oe&15)<<12|(ue&63)<<6|ce&63,fe>2047&&(fe<55296||fe>57343)&&(se=fe));break;case 4:ue=re[ie+1],ce=re[ie+2],he=re[ie+3],(ue&192)===128&&(ce&192)===128&&(he&192)===128&&(fe=(oe&15)<<18|(ue&63)<<12|(ce&63)<<6|he&63,fe>65535&&fe<1114112&&(se=fe))}}se===null?(se=65533,ae=1):se>65535&&(se-=65536,ne.push(se>>>10&1023|55296),se=56320|se&1023),ne.push(se),ie+=ae}return decodeCodePointsArray(ne)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(re){var ee=re.length;if(ee<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,re);for(var te="",ne=0;ne<ee;)te+=String.fromCharCode.apply(String,re.slice(ne,ne+=MAX_ARGUMENTS_LENGTH));return te}function asciiSlice(re,ee,te){var ne="";te=Math.min(re.length,te);for(var ie=ee;ie<te;++ie)ne+=String.fromCharCode(re[ie]&127);return ne}function latin1Slice(re,ee,te){var ne="";te=Math.min(re.length,te);for(var ie=ee;ie<te;++ie)ne+=String.fromCharCode(re[ie]);return ne}function hexSlice(re,ee,te){var ne=re.length;(!ee||ee<0)&&(ee=0),(!te||te<0||te>ne)&&(te=ne);for(var ie="",oe=ee;oe<te;++oe)ie+=toHex(re[oe]);return ie}function utf16leSlice(re,ee,te){for(var ne=re.slice(ee,te),ie="",oe=0;oe<ne.length;oe+=2)ie+=String.fromCharCode(ne[oe]+ne[oe+1]*256);return ie}Buffer.prototype.slice=function re(ee,te){var ne=this.length;ee=~~ee,te=te===void 0?ne:~~te,ee<0?(ee+=ne,ee<0&&(ee=0)):ee>ne&&(ee=ne),te<0?(te+=ne,te<0&&(te=0)):te>ne&&(te=ne),te<ee&&(te=ee);var ie;if(Buffer.TYPED_ARRAY_SUPPORT)ie=this.subarray(ee,te),ie.__proto__=Buffer.prototype;else{var oe=te-ee;ie=new Buffer(oe,void 0);for(var se=0;se<oe;++se)ie[se]=this[se+ee]}return ie};function checkOffset(re,ee,te){if(re%1!==0||re<0)throw new RangeError("offset is not uint");if(re+ee>te)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function re(ee,te,ne){ee=ee|0,te=te|0,ne||checkOffset(ee,te,this.length);for(var ie=this[ee],oe=1,se=0;++se<te&&(oe*=256);)ie+=this[ee+se]*oe;return ie};Buffer.prototype.readUIntBE=function re(ee,te,ne){ee=ee|0,te=te|0,ne||checkOffset(ee,te,this.length);for(var ie=this[ee+--te],oe=1;te>0&&(oe*=256);)ie+=this[ee+--te]*oe;return ie};Buffer.prototype.readUInt8=function re(ee,te){return te||checkOffset(ee,1,this.length),this[ee]};Buffer.prototype.readUInt16LE=function re(ee,te){return te||checkOffset(ee,2,this.length),this[ee]|this[ee+1]<<8};Buffer.prototype.readUInt16BE=function re(ee,te){return te||checkOffset(ee,2,this.length),this[ee]<<8|this[ee+1]};Buffer.prototype.readUInt32LE=function re(ee,te){return te||checkOffset(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+this[ee+3]*16777216};Buffer.prototype.readUInt32BE=function re(ee,te){return te||checkOffset(ee,4,this.length),this[ee]*16777216+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])};Buffer.prototype.readIntLE=function re(ee,te,ne){ee=ee|0,te=te|0,ne||checkOffset(ee,te,this.length);for(var ie=this[ee],oe=1,se=0;++se<te&&(oe*=256);)ie+=this[ee+se]*oe;return oe*=128,ie>=oe&&(ie-=Math.pow(2,8*te)),ie};Buffer.prototype.readIntBE=function re(ee,te,ne){ee=ee|0,te=te|0,ne||checkOffset(ee,te,this.length);for(var ie=te,oe=1,se=this[ee+--ie];ie>0&&(oe*=256);)se+=this[ee+--ie]*oe;return oe*=128,se>=oe&&(se-=Math.pow(2,8*te)),se};Buffer.prototype.readInt8=function re(ee,te){return te||checkOffset(ee,1,this.length),this[ee]&128?(255-this[ee]+1)*-1:this[ee]};Buffer.prototype.readInt16LE=function re(ee,te){te||checkOffset(ee,2,this.length);var ne=this[ee]|this[ee+1]<<8;return ne&32768?ne|4294901760:ne};Buffer.prototype.readInt16BE=function re(ee,te){te||checkOffset(ee,2,this.length);var ne=this[ee+1]|this[ee]<<8;return ne&32768?ne|4294901760:ne};Buffer.prototype.readInt32LE=function re(ee,te){return te||checkOffset(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24};Buffer.prototype.readInt32BE=function re(ee,te){return te||checkOffset(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]};Buffer.prototype.readFloatLE=function re(ee,te){return te||checkOffset(ee,4,this.length),read(this,ee,!0,23,4)};Buffer.prototype.readFloatBE=function re(ee,te){return te||checkOffset(ee,4,this.length),read(this,ee,!1,23,4)};Buffer.prototype.readDoubleLE=function re(ee,te){return te||checkOffset(ee,8,this.length),read(this,ee,!0,52,8)};Buffer.prototype.readDoubleBE=function re(ee,te){return te||checkOffset(ee,8,this.length),read(this,ee,!1,52,8)};function checkInt(re,ee,te,ne,ie,oe){if(!internalIsBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>ie||ee<oe)throw new RangeError('"value" argument is out of bounds');if(te+ne>re.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function re(ee,te,ne,ie){if(ee=+ee,te=te|0,ne=ne|0,!ie){var oe=Math.pow(2,8*ne)-1;checkInt(this,ee,te,ne,oe,0)}var se=1,ae=0;for(this[te]=ee&255;++ae<ne&&(se*=256);)this[te+ae]=ee/se&255;return te+ne};Buffer.prototype.writeUIntBE=function re(ee,te,ne,ie){if(ee=+ee,te=te|0,ne=ne|0,!ie){var oe=Math.pow(2,8*ne)-1;checkInt(this,ee,te,ne,oe,0)}var se=ne-1,ae=1;for(this[te+se]=ee&255;--se>=0&&(ae*=256);)this[te+se]=ee/ae&255;return te+ne};Buffer.prototype.writeUInt8=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(ee=Math.floor(ee)),this[te]=ee&255,te+1};function objectWriteUInt16(re,ee,te,ne){ee<0&&(ee=65535+ee+1);for(var ie=0,oe=Math.min(re.length-te,2);ie<oe;++ie)re[te+ie]=(ee&255<<8*(ne?ie:1-ie))>>>(ne?ie:1-ie)*8}Buffer.prototype.writeUInt16LE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee&255,this[te+1]=ee>>>8):objectWriteUInt16(this,ee,te,!0),te+2};Buffer.prototype.writeUInt16BE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee>>>8,this[te+1]=ee&255):objectWriteUInt16(this,ee,te,!1),te+2};function objectWriteUInt32(re,ee,te,ne){ee<0&&(ee=4294967295+ee+1);for(var ie=0,oe=Math.min(re.length-te,4);ie<oe;++ie)re[te+ie]=ee>>>(ne?ie:3-ie)*8&255}Buffer.prototype.writeUInt32LE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[te+3]=ee>>>24,this[te+2]=ee>>>16,this[te+1]=ee>>>8,this[te]=ee&255):objectWriteUInt32(this,ee,te,!0),te+4};Buffer.prototype.writeUInt32BE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee>>>24,this[te+1]=ee>>>16,this[te+2]=ee>>>8,this[te+3]=ee&255):objectWriteUInt32(this,ee,te,!1),te+4};Buffer.prototype.writeIntLE=function re(ee,te,ne,ie){if(ee=+ee,te=te|0,!ie){var oe=Math.pow(2,8*ne-1);checkInt(this,ee,te,ne,oe-1,-oe)}var se=0,ae=1,ue=0;for(this[te]=ee&255;++se<ne&&(ae*=256);)ee<0&&ue===0&&this[te+se-1]!==0&&(ue=1),this[te+se]=(ee/ae>>0)-ue&255;return te+ne};Buffer.prototype.writeIntBE=function re(ee,te,ne,ie){if(ee=+ee,te=te|0,!ie){var oe=Math.pow(2,8*ne-1);checkInt(this,ee,te,ne,oe-1,-oe)}var se=ne-1,ae=1,ue=0;for(this[te+se]=ee&255;--se>=0&&(ae*=256);)ee<0&&ue===0&&this[te+se+1]!==0&&(ue=1),this[te+se]=(ee/ae>>0)-ue&255;return te+ne};Buffer.prototype.writeInt8=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(ee=Math.floor(ee)),ee<0&&(ee=255+ee+1),this[te]=ee&255,te+1};Buffer.prototype.writeInt16LE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee&255,this[te+1]=ee>>>8):objectWriteUInt16(this,ee,te,!0),te+2};Buffer.prototype.writeInt16BE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee>>>8,this[te+1]=ee&255):objectWriteUInt16(this,ee,te,!1),te+2};Buffer.prototype.writeInt32LE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee&255,this[te+1]=ee>>>8,this[te+2]=ee>>>16,this[te+3]=ee>>>24):objectWriteUInt32(this,ee,te,!0),te+4};Buffer.prototype.writeInt32BE=function re(ee,te,ne){return ee=+ee,te=te|0,ne||checkInt(this,ee,te,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),Buffer.TYPED_ARRAY_SUPPORT?(this[te]=ee>>>24,this[te+1]=ee>>>16,this[te+2]=ee>>>8,this[te+3]=ee&255):objectWriteUInt32(this,ee,te,!1),te+4};function checkIEEE754(re,ee,te,ne,ie,oe){if(te+ne>re.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function writeFloat(re,ee,te,ne,ie){return ie||checkIEEE754(re,ee,te,4),write(re,ee,te,ne,23,4),te+4}Buffer.prototype.writeFloatLE=function re(ee,te,ne){return writeFloat(this,ee,te,!0,ne)};Buffer.prototype.writeFloatBE=function re(ee,te,ne){return writeFloat(this,ee,te,!1,ne)};function writeDouble(re,ee,te,ne,ie){return ie||checkIEEE754(re,ee,te,8),write(re,ee,te,ne,52,8),te+8}Buffer.prototype.writeDoubleLE=function re(ee,te,ne){return writeDouble(this,ee,te,!0,ne)};Buffer.prototype.writeDoubleBE=function re(ee,te,ne){return writeDouble(this,ee,te,!1,ne)};Buffer.prototype.copy=function re(ee,te,ne,ie){if(ne||(ne=0),!ie&&ie!==0&&(ie=this.length),te>=ee.length&&(te=ee.length),te||(te=0),ie>0&&ie<ne&&(ie=ne),ie===ne||ee.length===0||this.length===0)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("sourceStart out of bounds");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),ee.length-te<ie-ne&&(ie=ee.length-te+ne);var oe=ie-ne,se;if(this===ee&&ne<te&&te<ie)for(se=oe-1;se>=0;--se)ee[se+te]=this[se+ne];else if(oe<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(se=0;se<oe;++se)ee[se+te]=this[se+ne];else Uint8Array.prototype.set.call(ee,this.subarray(ne,ne+oe),te);return oe};Buffer.prototype.fill=function re(ee,te,ne,ie){if(typeof ee=="string"){if(typeof te=="string"?(ie=te,te=0,ne=this.length):typeof ne=="string"&&(ie=ne,ne=this.length),ee.length===1){var oe=ee.charCodeAt(0);oe<256&&(ee=oe)}if(ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!Buffer.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie)}else typeof ee=="number"&&(ee=ee&255);if(te<0||this.length<te||this.length<ne)throw new RangeError("Out of range index");if(ne<=te)return this;te=te>>>0,ne=ne===void 0?this.length:ne>>>0,ee||(ee=0);var se;if(typeof ee=="number")for(se=te;se<ne;++se)this[se]=ee;else{var ae=internalIsBuffer(ee)?ee:utf8ToBytes(new Buffer(ee,ie).toString()),ue=ae.length;for(se=0;se<ne-te;++se)this[se+te]=ae[se%ue]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(re){if(re=stringtrim(re).replace(INVALID_BASE64_RE,""),re.length<2)return"";for(;re.length%4!==0;)re=re+"=";return re}function stringtrim(re){return re.trim?re.trim():re.replace(/^\s+|\s+$/g,"")}function toHex(re){return re<16?"0"+re.toString(16):re.toString(16)}function utf8ToBytes(re,ee){ee=ee||1/0;for(var te,ne=re.length,ie=null,oe=[],se=0;se<ne;++se){if(te=re.charCodeAt(se),te>55295&&te<57344){if(!ie){if(te>56319){(ee-=3)>-1&&oe.push(239,191,189);continue}else if(se+1===ne){(ee-=3)>-1&&oe.push(239,191,189);continue}ie=te;continue}if(te<56320){(ee-=3)>-1&&oe.push(239,191,189),ie=te;continue}te=(ie-55296<<10|te-56320)+65536}else ie&&(ee-=3)>-1&&oe.push(239,191,189);if(ie=null,te<128){if((ee-=1)<0)break;oe.push(te)}else if(te<2048){if((ee-=2)<0)break;oe.push(te>>6|192,te&63|128)}else if(te<65536){if((ee-=3)<0)break;oe.push(te>>12|224,te>>6&63|128,te&63|128)}else if(te<1114112){if((ee-=4)<0)break;oe.push(te>>18|240,te>>12&63|128,te>>6&63|128,te&63|128)}else throw new Error("Invalid code point")}return oe}function asciiToBytes(re){for(var ee=[],te=0;te<re.length;++te)ee.push(re.charCodeAt(te)&255);return ee}function utf16leToBytes(re,ee){for(var te,ne,ie,oe=[],se=0;se<re.length&&!((ee-=2)<0);++se)te=re.charCodeAt(se),ne=te>>8,ie=te%256,oe.push(ie),oe.push(ne);return oe}function base64ToBytes(re){return toByteArray(base64clean(re))}function blitBuffer(re,ee,te,ne){for(var ie=0;ie<ne&&!(ie+te>=ee.length||ie>=re.length);++ie)ee[ie+te]=re[ie];return ie}function isnan(re){return re!==re}function isBuffer(re){return re!=null&&(!!re._isBuffer||isFastBuffer(re)||isSlowBuffer(re))}function isFastBuffer(re){return!!re.constructor&&typeof re.constructor.isBuffer=="function"&&re.constructor.isBuffer(re)}function isSlowBuffer(re){return typeof re.readFloatLE=="function"&&typeof re.slice=="function"&&isFastBuffer(re.slice(0,0))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function encrypt(re,ee){const te=generateSalt();return keyFromPassword(re,te).then(function(ne){return encryptWithKey(ne,ee)}).then(function(ne){return ne.salt=te,JSON.stringify(ne)})}function encryptWithKey(re,ee){const te=JSON.stringify(ee),ne=Buffer.from(te,"utf-8"),ie=commonjsGlobal.crypto.getRandomValues(new Uint8Array(16));return commonjsGlobal.crypto.subtle.encrypt({name:"AES-GCM",iv:ie},re,ne).then(function(oe){const se=new Uint8Array(oe),ae=Buffer.from(ie).toString("base64");return{data:Buffer.from(se).toString("base64"),iv:ae}})}function decrypt(re,ee){const te=JSON.parse(ee),{salt:ne}=te;return keyFromPassword(re,ne).then(function(ie){return decryptWithKey(ie,te)})}function decryptWithKey(re,ee){const te=Buffer.from(ee.data,"base64"),ne=Buffer.from(ee.iv,"base64");return crypto.subtle.decrypt({name:"AES-GCM",iv:ne},re,te).then(function(ie){const oe=new Uint8Array(ie),se=Buffer.from(oe).toString("utf-8");return JSON.parse(se)}).catch(function(ie){throw new Error("Incorrect password")})}function keyFromPassword(re,ee){const te=Buffer.from(re,"utf-8"),ne=Buffer.from(ee,"base64");return commonjsGlobal.crypto.subtle.importKey("raw",te,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]).then(function(ie){return commonjsGlobal.crypto.subtle.deriveKey({name:"PBKDF2",salt:ne,iterations:1e4,hash:"SHA-256"},ie,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])})}function serializeBufferFromStorage(re){const ee=re.slice(0,2)==="0x"?re.slice(2):re,te=new Uint8Array(ee.length/2);for(let ne=0;ne<ee.length;ne+=2){const ie=ee.substr(ne,2);te[ne/2]=parseInt(ie,16)}return te}function serializeBufferForStorage(re){let ee="0x";const te=re.length||re.byteLength;for(let ne=0;ne<te;ne++)ee+=unprefixedHex(re[ne]);return ee}function unprefixedHex(re){let ee=re.toString(16);for(;ee.length<2;)ee=`0${ee}`;return ee}function generateSalt(re=32){const ee=new Uint8Array(re);return commonjsGlobal.crypto.getRandomValues(ee),btoa(String.fromCharCode.apply(null,ee))}var dist={encrypt,decrypt,keyFromPassword,encryptWithKey,decryptWithKey,serializeBufferForStorage,serializeBufferFromStorage,generateSalt};async function encryptData(re,ee){return await dist.encrypt(re,ee)}async function decryptData(re,ee){return await dist.decrypt(re,ee)}class TemplateStorage{}var RemoteStatus=(re=>(re.Success="success",re.Timeout="timeout",re.Exists="exists",re.InvalidRoute="invalidroute",re.InvalidData="invaliddata",re.NoData="nodata",re.TooLarge="toolarge",re))(RemoteStatus||{}),StorageStatus=(re=>(re[re.Success=0]="Success",re[re.Error=1]="Error",re[re.NoData=2]="NoData",re[re.NotFound=3]="NotFound",re[re.InvalidData=4]="InvalidData",re))(StorageStatus||{}),SyncStatus=(re=>(re[re.Success=0]="Success",re[re.Error=1]="Error",re))(SyncStatus||{});class DefaultStorage extends TemplateStorage{async getData(ee){const te=localStorage.getItem("data");return te===null?[StorageStatus.NoData,null]:[StorageStatus.Success,await decryptData(ee,te)]}async setData(ee,te){const ne=await encryptData(ee,te);return localStorage.setItem("data",ne),StorageStatus.Success}async addAccount(ee,te,ne){const[ie,oe]=await this.getData(ee);return ie!==StorageStatus.Success?ie:(oe.push({name:te,key:ne}),await this.setData(ee,oe))}async removeAccount(ee,te){const[ne,ie]=await this.getData(ee);if(ne!==StorageStatus.Success)return ne;const oe=ie.filter(se=>se.name!==te);return await this.setData(ee,oe)}verifyLocalData(){return localStorage.getItem("data")!==null}clearLocalData(){return localStorage.removeItem("data"),StorageStatus.Success}initLocalData(ee){return this.setData(ee,[]),StorageStatus.Success}}class TemplateRemote{}class DefaultRemote extends TemplateRemote{constructor(){super(...arguments);ve(this,"baseRemoteURL","https://totp.blobbybilb.workers.dev/");ve(this,"remoteURLs",{get:this.baseRemoteURL+"get/",set:this.baseRemoteURL+"set/",exists:this.baseRemoteURL+"exists/"})}async checkIfExists(){try{await fetch(this.remoteURLs.exists)}catch{return!1}return await(await fetch(this.remoteURLs.exists)).text()===RemoteStatus.Exists}async getData(te,ne){const ie=await(await fetch(this.remoteURLs.get+te)).text();if(!ie.startsWith(RemoteStatus.Success))return[ie,null];const oe=await decryptData(ne,ie.substring(RemoteStatus.Success.length,ie.length));return[RemoteStatus.Success,oe]}async setData(te,ne,ie){const oe=await encryptData(ne,ie);return await(await fetch(this.remoteURLs.set+te,{method:"POST",body:oe})).text()}}class TemplateSync{}class DefaultSync extends TemplateSync{constructor(te,ne){super();ve(this,"remote");ve(this,"storage");this.remote=te,this.storage=ne}async syncData(te,ne,ie){let[,oe]=await this.remote.getData(ne,ie);const[,se]=await this.storage.getData(te);oe===null&&(await this.remote.setData(ne,ie,se),oe=se);const ae=[...se,...oe].filter(he=>he.key!=="deleteddeleteddeleted"),ue=[],ce=ae.filter(he=>ue.includes(he.name)?!1:(ue.push(he.name),!0));return await this.storage.setData(te,ce),await this.remote.setData(ne,ie,ce),[SyncStatus.Success,[RemoteStatus.Success,StorageStatus.Success]]}}const theStorage=new DefaultStorage,storage=readable(theStorage),sync=readable(new DefaultSync(new DefaultRemote,new DefaultStorage)),currentName=writable(""),Titlebar_svelte_svelte_type_style_lang="";function create_fragment$5(re){let ee,te,ne,ie,oe,se,ae,ue,ce,he,fe,le,de;return{c(){ee=element("main"),te=element("div"),ne=element("div"),ie=element("img"),se=space(),ae=element("p"),ae.textContent="TOTP-App",ue=space(),ce=element("div"),he=element("img"),src_url_equal(ie.src,oe=syncIcon)||attr(ie,"src",oe),attr(ie,"alt","sync"),attr(ae,"class","svelte-15xpyu2"),src_url_equal(he.src,fe=settingsIcon)||attr(he,"src",fe),attr(he,"alt","settings"),attr(te,"id","grid"),attr(te,"class","svelte-15xpyu2"),attr(ee,"class","svelte-15xpyu2")},m(pe,we){insert(pe,ee,we),append(ee,te),append(te,ne),append(ne,ie),append(te,se),append(te,ae),append(te,ue),append(te,ce),append(ce,he),le||(de=[listen(ne,"click",re[1]),listen(ne,"keypress",keybind),listen(ce,"click",re[0]),listen(ce,"keypress",keybind)],le=!0)},p:noop,i:noop,o:noop,d(pe){pe&&detach(ee),le=!1,run_all(de)}}}function instance$5(re,ee,te){let ne;component_subscribe(re,sync,ue=>te(4,ne=ue));let{PIN:ie}=ee,oe=null;function se(){var ce;const ue=prompt("Enter an existing sync token or use the randomly generated one.",(ce=localStorage.getItem("remoteToken"))!=null?ce:randomSecret());ue&&localStorage.setItem("remoteToken",ue)}function ae(){oe=prompt("Enter your sync encryption password.",oe!=null?oe:""),ne.syncData(ie,localStorage.getItem("remoteToken"),oe)}return re.$$set=ue=>{"PIN"in ue&&te(2,ie=ue.PIN)},[se,ae,ie]}class Titlebar extends SvelteComponent{constructor(ee){super(),init$1(this,ee,instance$5,create_fragment$5,safe_not_equal,{PIN:2})}}const copyIcon="/assets/copy-outline.dcb3880e.svg",Totpdisplay_svelte_svelte_type_style_lang="";function create_fragment$4(re){let ee,te,ne,ie,oe,se,ae,ue,ce,he,fe,le,de,pe,we;return{c(){ee=element("main"),te=element("p"),ne=text(re[2]),ie=space(),oe=element("p"),se=text(re[0]),ae=space(),ue=element("div"),ce=element("img"),fe=space(),le=element("p"),de=text(re[1]),attr(te,"id","account"),attr(te,"class","svelte-nm4wd5"),attr(oe,"id","otp"),attr(oe,"class","svelte-nm4wd5"),src_url_equal(ce.src,he=copyIcon)||attr(ce,"src",he),attr(ce,"alt","copy"),attr(ce,"class","svelte-nm4wd5"),attr(le,"id","timer"),attr(le,"class","svelte-nm4wd5"),attr(ee,"class","svelte-nm4wd5")},m(me,ge){insert(me,ee,ge),append(ee,te),append(te,ne),append(ee,ie),append(ee,oe),append(oe,se),append(ee,ae),append(ee,ue),append(ue,ce),append(ee,fe),append(ee,le),append(le,de),pe||(we=[listen(ue,"click",re[3]),listen(ue,"keypress",keybind)],pe=!0)},p(me,[ge]){ge&4&&set_data(ne,me[2]),ge&1&&set_data(se,me[0]),ge&2&&set_data(de,me[1])},i:noop,o:noop,d(me){me&&detach(ee),pe=!1,run_all(we)}}}function instance$4(re,ee,te){let ne="123 123",ie=0,oe="-",se;function ae(he){se=newTOTP(he.key),te(2,oe=he.name),ue()}function ue(){if(!se)return;const he=se.generate();te(0,ne=`${he.substring(0,3)} ${he.substring(3,6)}`),te(1,ie=getTimeUntilTOTPChange()),currentName.set(oe)}function ce(){navigator.clipboard.writeText(ne.replace(" ",""))}return setInterval(ue,1e3),[ne,ie,oe,ce,ae]}class Totpdisplay extends SvelteComponent{constructor(ee){super(),init$1(this,ee,instance$4,create_fragment$4,safe_not_equal,{set:4})}get set(){return this.$$.ctx[4]}}const qrIcon="/assets/qr-code-outline.6d1800dd.svg",plusIcon="/assets/add-outline.fa372d22.svg",trashIcon="/assets/trash-outline.28058320.svg",editIcon="/assets/create-outline.b68008ae.svg",Topbar_svelte_svelte_type_style_lang="";function create_fragment$3(re){let ee,te,ne,ie,oe,se,ae,ue,ce,he,fe,le,de,pe,we,me,ge,ye,_e;return{c(){ee=element("main"),te=element("div"),ne=element("div"),ie=element("img"),se=space(),ae=element("div"),ue=element("img"),he=space(),fe=element("div"),le=element("img"),pe=space(),we=element("div"),me=element("img"),src_url_equal(ie.src,oe=qrIcon)||attr(ie,"src",oe),attr(ie,"alt","scan"),attr(ie,"class","svelte-1v8c2b1"),attr(ne,"class","svelte-1v8c2b1"),src_url_equal(ue.src,ce=plusIcon)||attr(ue,"src",ce),attr(ue,"alt","add"),attr(ue,"class","svelte-1v8c2b1"),attr(ae,"class","svelte-1v8c2b1"),src_url_equal(le.src,de=trashIcon)||attr(le,"src",de),attr(le,"alt","delete"),attr(le,"class","svelte-1v8c2b1"),attr(fe,"class","svelte-1v8c2b1"),src_url_equal(me.src,ge=editIcon)||attr(me,"src",ge),attr(me,"alt","edit"),attr(me,"class","svelte-1v8c2b1"),attr(we,"class","svelte-1v8c2b1"),attr(te,"id","grid"),attr(te,"class","svelte-1v8c2b1"),attr(ee,"class","svelte-1v8c2b1")},m(Be,be){insert(Be,ee,be),append(ee,te),append(te,ne),append(ne,ie),append(te,se),append(te,ae),append(ae,ue),append(te,he),append(te,fe),append(fe,le),append(te,pe),append(te,we),append(we,me),ye||(_e=[listen(ne,"click",re[8]),listen(ne,"keypress",re[7]),listen(ae,"click",re[0]),listen(ae,"keypress",re[6]),listen(fe,"click",re[1]),listen(fe,"keypress",re[5]),listen(we,"click",re[2]),listen(we,"keypress",re[4])],ye=!0)},p:noop,i:noop,o:noop,d(Be){Be&&detach(ee),ye=!1,run_all(_e)}}}function instance$3(re,ee,te){let ne,ie;component_subscribe(re,currentName,pe=>te(9,ne=pe)),component_subscribe(re,storage,pe=>te(10,ie=pe));let{PIN:oe}=ee;function se(){const pe=prompt("Enter account name"),we=prompt("Enter account key");ie.addAccount(oe,pe,we),window.location.reload()}async function ae(){confirm("Delete selected account?")&&(await ie.removeAccount(oe,ne),await ie.addAccount(oe,ne,"deleteddeleteddeleted"),window.location.reload())}async function ue(){if(confirm("Edit selected account?")){const pe=prompt("Enter new account key");await ie.removeAccount(oe,ne),await ie.addAccount(oe,ne,pe),window.location.reload()}}function ce(pe){bubble.call(this,re,pe)}function he(pe){bubble.call(this,re,pe)}function fe(pe){bubble.call(this,re,pe)}function le(pe){bubble.call(this,re,pe)}const de=()=>alert("QR code scanning is coming soon-ish");return re.$$set=pe=>{"PIN"in pe&&te(3,oe=pe.PIN)},[se,ae,ue,oe,ce,he,fe,le,de]}class Topbar extends SvelteComponent{constructor(ee){super(),init$1(this,ee,instance$3,create_fragment$3,safe_not_equal,{PIN:3})}}const Account_svelte_svelte_type_style_lang="";function create_fragment$2(re){let ee,te=re[0].name+"",ne,ie,oe,se,ae;return{c(){ee=element("button"),ne=text(te),ie=space(),oe=element("br"),attr(ee,"id",re[1]),attr(ee,"class","svelte-539eu6")},m(ue,ce){insert(ue,ee,ce),append(ee,ne),insert(ue,ie,ce),insert(ue,oe,ce),se||(ae=listen(ee,"click",re[2]),se=!0)},p(ue,[ce]){ce&1&&te!==(te=ue[0].name+"")&&set_data(ne,te)},i:noop,o:noop,d(ue){ue&&detach(ee),ue&&detach(ie),ue&&detach(oe),se=!1,ae()}}}function instance$2(re,ee,te){let{token:ne}=ee,{setTOTPDisplay:ie}=ee;const oe=`${Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}`;function se(){ie(ne);const ae=document.getElementById(oe);ae.style.opacity="0.75",setTimeout(()=>{ae.style.opacity="1"},100)}return re.$$set=ae=>{"token"in ae&&te(0,ne=ae.token),"setTOTPDisplay"in ae&&te(3,ie=ae.setTOTPDisplay)},[ne,oe,se,ie]}class Account extends SvelteComponent{constructor(ee){super(),init$1(this,ee,instance$2,create_fragment$2,safe_not_equal,{token:0,setTOTPDisplay:3})}}const AccountsContainer_svelte_svelte_type_style_lang="";function get_each_context(re,ee,te){const ne=re.slice();return ne[5]=ee[te],ne}function create_catch_block(re){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_then_block(re){let ee,te,ne=re[4],ie=[];for(let se=0;se<ne.length;se+=1)ie[se]=create_each_block(get_each_context(re,ne,se));const oe=se=>transition_out(ie[se],1,1,()=>{ie[se]=null});return{c(){for(let se=0;se<ie.length;se+=1)ie[se].c();ee=empty()},m(se,ae){for(let ue=0;ue<ie.length;ue+=1)ie[ue].m(se,ae);insert(se,ee,ae),te=!0},p(se,ae){if(ae&6){ne=se[4];let ue;for(ue=0;ue<ne.length;ue+=1){const ce=get_each_context(se,ne,ue);ie[ue]?(ie[ue].p(ce,ae),transition_in(ie[ue],1)):(ie[ue]=create_each_block(ce),ie[ue].c(),transition_in(ie[ue],1),ie[ue].m(ee.parentNode,ee))}for(group_outros(),ue=ne.length;ue<ie.length;ue+=1)oe(ue);check_outros()}},i(se){if(!te){for(let ae=0;ae<ne.length;ae+=1)transition_in(ie[ae]);te=!0}},o(se){ie=ie.filter(Boolean);for(let ae=0;ae<ie.length;ae+=1)transition_out(ie[ae]);te=!1},d(se){destroy_each(ie,se),se&&detach(ee)}}}function create_if_block(re){let ee,te;return ee=new Account({props:{token:re[5],setTOTPDisplay:re[1]}}),{c(){create_component(ee.$$.fragment)},m(ne,ie){mount_component(ee,ne,ie),te=!0},p(ne,ie){const oe={};ie&2&&(oe.setTOTPDisplay=ne[1]),ee.$set(oe)},i(ne){te||(transition_in(ee.$$.fragment,ne),te=!0)},o(ne){transition_out(ee.$$.fragment,ne),te=!1},d(ne){destroy_component(ee,ne)}}}function create_each_block(re){let ee,te,ne=re[5].key!=="deleteddeleteddeleted"&&create_if_block(re);return{c(){ne&&ne.c(),ee=empty()},m(ie,oe){ne&&ne.m(ie,oe),insert(ie,ee,oe),te=!0},p(ie,oe){ie[5].key!=="deleteddeleteddeleted"&&ne.p(ie,oe)},i(ie){te||(transition_in(ne),te=!0)},o(ie){transition_out(ne),te=!1},d(ie){ne&&ne.d(ie),ie&&detach(ee)}}}function create_pending_block(re){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_fragment$1(re){let ee,te,ne,ie,oe,se,ae;te=new Topbar({props:{PIN:re[0]}});let ue={ctx:re,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:4,blocks:[,,,]};return handle_promise(re[2](),ue),{c(){ee=element("main"),create_component(te.$$.fragment),ne=space(),ie=element("div"),ue.block.c(),oe=space(),se=element("div"),attr(se,"id","bottom-padding"),attr(se,"class","svelte-1tpj1j7"),attr(ie,"id","container"),attr(ie,"class","svelte-1tpj1j7"),attr(ee,"class","svelte-1tpj1j7")},m(ce,he){insert(ce,ee,he),mount_component(te,ee,null),append(ee,ne),append(ee,ie),ue.block.m(ie,ue.anchor=null),ue.mount=()=>ie,ue.anchor=oe,append(ie,oe),append(ie,se),ae=!0},p(ce,[he]){re=ce;const fe={};he&1&&(fe.PIN=re[0]),te.$set(fe),update_await_block_branch(ue,re,he)},i(ce){ae||(transition_in(te.$$.fragment,ce),transition_in(ue.block),ae=!0)},o(ce){transition_out(te.$$.fragment,ce);for(let he=0;he<3;he+=1){const fe=ue.blocks[he];transition_out(fe)}ae=!1},d(ce){ce&&detach(ee),destroy_component(te),ue.block.d(),ue.token=null,ue=null}}}function instance$1(re,ee,te){let ne;component_subscribe(re,storage,ae=>te(3,ne=ae));let{PIN:ie}=ee,{setTOTPDisplay:oe}=ee;async function se(){return(await ne.getData(ie))[1]}return re.$$set=ae=>{"PIN"in ae&&te(0,ie=ae.PIN),"setTOTPDisplay"in ae&&te(1,oe=ae.setTOTPDisplay)},[ie,oe,se]}class AccountsContainer extends SvelteComponent{constructor(ee){super(),init$1(this,ee,instance$1,create_fragment$1,safe_not_equal,{PIN:0,setTOTPDisplay:1})}}function create_fragment(re){let ee,te,ne,ie,oe,se,ae,ue;te=new Titlebar({props:{PIN}});function ce(fe){re[1](fe)}let he={};return re[0]!==void 0&&(he.set=re[0]),ie=new Totpdisplay({props:he}),binding_callbacks.push(()=>bind(ie,"set",ce)),ae=new AccountsContainer({props:{PIN,setTOTPDisplay:re[0]}}),{c(){ee=element("main"),create_component(te.$$.fragment),ne=space(),create_component(ie.$$.fragment),se=space(),create_component(ae.$$.fragment)},m(fe,le){insert(fe,ee,le),mount_component(te,ee,null),append(ee,ne),mount_component(ie,ee,null),append(ee,se),mount_component(ae,ee,null),ue=!0},p(fe,[le]){const de={};!oe&&le&1&&(oe=!0,de.set=fe[0],add_flush_callback(()=>oe=!1)),ie.$set(de);const pe={};le&1&&(pe.setTOTPDisplay=fe[0]),ae.$set(pe)},i(fe){ue||(transition_in(te.$$.fragment,fe),transition_in(ie.$$.fragment,fe),transition_in(ae.$$.fragment,fe),ue=!0)},o(fe){transition_out(te.$$.fragment,fe),transition_out(ie.$$.fragment,fe),transition_out(ae.$$.fragment,fe),ue=!1},d(fe){fe&&detach(ee),destroy_component(te),destroy_component(ie),destroy_component(ae)}}}const PIN="blob";function instance(re,ee,te){let ne;component_subscribe(re,storage,se=>te(2,ne=se));let ie;ne.verifyLocalData()||ne.initLocalData(PIN);function oe(se){ie=se,te(0,ie)}return[ie,oe]}class App extends SvelteComponent{constructor(ee){super(),init$1(this,ee,instance,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});
